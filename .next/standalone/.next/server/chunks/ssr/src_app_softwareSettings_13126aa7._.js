module.exports=[64854,a=>{a.v({accessDenied:"softwareSettings-module__ADxWNa__accessDenied",activeTab:"softwareSettings-module__ADxWNa__activeTab",addOptionButton:"softwareSettings-module__ADxWNa__addOptionButton",checkbox:"softwareSettings-module__ADxWNa__checkbox",checkboxLabel:"softwareSettings-module__ADxWNa__checkboxLabel",container:"softwareSettings-module__ADxWNa__container",content:"softwareSettings-module__ADxWNa__content",dark:"softwareSettings-module__ADxWNa__dark",dueDateFields:"softwareSettings-module__ADxWNa__dueDateFields",dueDateOption:"softwareSettings-module__ADxWNa__dueDateOption",dueDateOptions:"softwareSettings-module__ADxWNa__dueDateOptions",error:"softwareSettings-module__ADxWNa__error",field:"softwareSettings-module__ADxWNa__field",fieldFull:"softwareSettings-module__ADxWNa__fieldFull",fieldHint:"softwareSettings-module__ADxWNa__fieldHint",fileInput:"softwareSettings-module__ADxWNa__fileInput",formGrid:"softwareSettings-module__ADxWNa__formGrid",header:"softwareSettings-module__ADxWNa__header",input:"softwareSettings-module__ADxWNa__input",label:"softwareSettings-module__ADxWNa__label",loading:"softwareSettings-module__ADxWNa__loading",logoImage:"softwareSettings-module__ADxWNa__logoImage",logoPreview:"softwareSettings-module__ADxWNa__logoPreview",logoUpload:"softwareSettings-module__ADxWNa__logoUpload",removeLogoButton:"softwareSettings-module__ADxWNa__removeLogoButton",removeOptionButton:"softwareSettings-module__ADxWNa__removeOptionButton",saveButton:"softwareSettings-module__ADxWNa__saveButton",saveSection:"softwareSettings-module__ADxWNa__saveSection",section:"softwareSettings-module__ADxWNa__section",sectionDescription:"softwareSettings-module__ADxWNa__sectionDescription",sectionTitle:"softwareSettings-module__ADxWNa__sectionTitle",subtitle:"softwareSettings-module__ADxWNa__subtitle",success:"softwareSettings-module__ADxWNa__success",tabButton:"softwareSettings-module__ADxWNa__tabButton",tabButtons:"softwareSettings-module__ADxWNa__tabButtons",tabContainer:"softwareSettings-module__ADxWNa__tabContainer",textarea:"softwareSettings-module__ADxWNa__textarea",title:"softwareSettings-module__ADxWNa__title",toggleDescription:"softwareSettings-module__ADxWNa__toggleDescription",toggleField:"softwareSettings-module__ADxWNa__toggleField",toggleInfo:"softwareSettings-module__ADxWNa__toggleInfo",toggleInput:"softwareSettings-module__ADxWNa__toggleInput",toggleLabel:"softwareSettings-module__ADxWNa__toggleLabel",toggleSlider:"softwareSettings-module__ADxWNa__toggleSlider",toggleTitle:"softwareSettings-module__ADxWNa__toggleTitle"})},33669,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(89531),e=a.i(9453),f=a.i(11642),g=a.i(1075),h=a.i(64854);a.s(["default",0,()=>{let{isAuthorized:a,isLoading:i}=(0,d.usePageProtection)("softwareSettings"),{isDarkMode:j}=(0,e.useTheme)(),{user:k}=(0,f.useAuth)(),[l,m]=(0,c.useState)({companyName:"",companyAddress:"",companyContactNumber:"",companyBusinessRegNo:"",companyDescription:"",companyLogo:"",invoiceWatermark:"",invoiceTermsAndConditions:"",invoiceFooter:"",invoiceDeveloperNote:"",defaultCreditLimit:1e5,totalBalanceDiscountPercent:5,showTotalBalanceDiscount:!1,dueDateOptions:[{label:"1 Month",days:30,isDefault:!1},{label:"45 Days",days:45,isDefault:!1},{label:"2 Months",days:60,isDefault:!1},{label:"75 Days",days:75,isDefault:!1},{label:"3 Months",days:90,isDefault:!0}],isSellingPriceReadonly:!1,isDiscountReadonly:!1,showTotalDiscountFromItems:!0,hideCostProfit:!1,hideSellingPrice:!1,hideDiscount:!1,hideFreeProducts:!1,hideCashDiscount:!1}),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)("company"),x=()=>({"Content-Type":"application/json","x-user-data":JSON.stringify(k||{})});(0,c.useEffect)(()=>{a&&y()},[a]);let y=async()=>{o(!0);try{let a=await fetch("/api/softwareSettings",{headers:x()}),b=await a.json();b.success&&b.settings&&m(b.settings)}catch(a){u("Failed to load softwareSettings")}finally{o(!1)}},z=(a,b)=>{m(c=>({...c,[a]:b}))},A=(a,b,c)=>{m(d=>({...d,dueDateOptions:d.dueDateOptions.map((d,e)=>e===a?{...d,[b]:c}:"isDefault"===b&&!0===c?{...d,isDefault:!1}:d)}))},B=async()=>{q(!0),u(""),s("");try{let a=await fetch("/api/softwareSettings",{method:"POST",headers:x(),body:JSON.stringify(l)}),b=await a.json();b.success?(s("Settings saved successfully!"),setTimeout(()=>s(""),3e3),window.dispatchEvent(new Event("companyNameUpdated"))):u(b.error||"Failed to save software Settings")}catch(a){u("An error occurred while saving software Settings")}finally{q(!1)}};return i?(0,b.jsx)("div",{className:h.default.loading,children:"Checking permissions..."}):a?(0,b.jsxs)("div",{className:`${h.default.container} ${j?"dark":"light"}`,children:[(0,b.jsxs)("div",{className:h.default.header,children:[(0,b.jsx)("h1",{className:h.default.title,children:"Software Settings"}),(0,b.jsx)("p",{className:h.default.subtitle,children:"Configure your business information and invoice settings"})]}),(0,b.jsx)("div",{className:h.default.tabContainer,children:(0,b.jsxs)("div",{className:h.default.tabButtons,children:[(0,b.jsx)("button",{className:`${h.default.tabButton} ${"company"===v?h.default.activeTab:""}`,onClick:()=>w("company"),children:"ðŸ¢ Company Info"}),(0,b.jsx)("button",{className:`${h.default.tabButton} ${"invoice"===v?h.default.activeTab:""}`,onClick:()=>w("invoice"),children:"ðŸ“‹ Invoice Settings"}),(0,b.jsx)("button",{className:`${h.default.tabButton} ${"financial"===v?h.default.activeTab:""}`,onClick:()=>w("financial"),children:"ðŸ’° Financial Settings"}),(0,b.jsx)("button",{className:`${h.default.tabButton} ${"dates"===v?h.default.activeTab:""}`,onClick:()=>w("dates"),children:"ðŸ“… Due Date Options"}),(0,b.jsx)("button",{className:`${h.default.tabButton} ${"display"===v?h.default.activeTab:""}`,onClick:()=>w("display"),children:"âš™ï¸ Invoice Display"}),(0,b.jsx)("button",{className:`${h.default.tabButton} ${"orders"===v?h.default.activeTab:""}`,onClick:()=>w("orders"),children:"ðŸ“¦ Orders Page"})]})}),(0,b.jsxs)("div",{className:h.default.content,children:["company"===v&&(0,b.jsxs)("div",{className:h.default.section,children:[(0,b.jsx)("h2",{className:h.default.sectionTitle,children:"Company Information"}),(0,b.jsxs)("div",{className:h.default.formGrid,children:[(0,b.jsxs)("div",{className:h.default.field,children:[(0,b.jsx)("label",{className:h.default.label,children:"Company/Shop Name *"}),(0,b.jsx)("input",{type:"text",value:l.companyName,onChange:a=>z("companyName",a.target.value),className:h.default.input,placeholder:"Enter your company or shop name",disabled:p,required:!0})]}),(0,b.jsxs)("div",{className:h.default.field,children:[(0,b.jsx)("label",{className:h.default.label,children:"Contact Number *"}),(0,b.jsx)("input",{type:"tel",value:l.companyContactNumber,onChange:a=>z("companyContactNumber",a.target.value),className:h.default.input,placeholder:"Enter contact number",disabled:p,required:!0})]}),(0,b.jsxs)("div",{className:h.default.fieldFull,children:[(0,b.jsx)("label",{className:h.default.label,children:"Company Address *"}),(0,b.jsx)("textarea",{value:l.companyAddress,onChange:a=>z("companyAddress",a.target.value),className:h.default.textarea,placeholder:"Enter complete business address",disabled:p,rows:3,required:!0})]}),(0,b.jsxs)("div",{className:h.default.field,children:[(0,b.jsx)("label",{className:h.default.label,children:"Business Registration No"}),(0,b.jsx)("input",{type:"text",value:l.companyBusinessRegNo,onChange:a=>z("companyBusinessRegNo",a.target.value),className:h.default.input,placeholder:"Enter business registration number",disabled:p})]}),(0,b.jsxs)("div",{className:h.default.fieldFull,children:[(0,b.jsx)("label",{className:h.default.label,children:"Company Description"}),(0,b.jsx)("textarea",{value:l.companyDescription,onChange:a=>z("companyDescription",a.target.value),className:h.default.textarea,placeholder:"Brief description of your business",disabled:p,rows:3})]}),(0,b.jsxs)("div",{className:h.default.fieldFull,children:[(0,b.jsx)("label",{className:h.default.label,children:"Company Logo URL"}),(0,b.jsx)("input",{type:"url",value:l.companyLogo,onChange:a=>z("companyLogo",a.target.value),className:h.default.input,placeholder:"https://example.com/your-logo.png",disabled:p}),(0,b.jsx)("small",{className:h.default.fieldHint,children:"Enter a direct URL to your company logo image. Make sure the URL is publicly accessible and ends with .jpg, .png, or .gif"}),l.companyLogo&&(0,b.jsxs)("div",{className:h.default.logoPreview,children:[(0,b.jsx)("img",{src:l.companyLogo,alt:"Company Logo",className:h.default.logoImage}),(0,b.jsx)("button",{type:"button",onClick:()=>z("companyLogo",""),className:h.default.removeLogoButton,children:"Remove Logo"})]})]})]})]}),"invoice"===v&&(0,b.jsxs)("div",{className:h.default.section,children:[(0,b.jsx)("h2",{className:h.default.sectionTitle,children:"Invoice Configuration"}),(0,b.jsxs)("div",{className:h.default.formGrid,children:[(0,b.jsxs)("div",{className:h.default.fieldFull,children:[(0,b.jsx)("label",{className:h.default.label,children:"Invoice Watermark"}),(0,b.jsx)("input",{type:"text",value:l.invoiceWatermark,onChange:a=>z("invoiceWatermark",a.target.value),className:h.default.input,placeholder:"e.g., PAID, CONFIDENTIAL",disabled:p}),(0,b.jsx)("small",{className:h.default.fieldHint,children:"Text that appears as watermark on invoices"})]}),(0,b.jsxs)("div",{className:h.default.fieldFull,children:[(0,b.jsx)("label",{className:h.default.label,children:"Terms and Conditions"}),(0,b.jsx)("textarea",{value:l.invoiceTermsAndConditions,onChange:a=>z("invoiceTermsAndConditions",a.target.value),className:h.default.textarea,placeholder:"Enter your invoice terms and conditions",disabled:p,rows:4})]}),(0,b.jsxs)("div",{className:h.default.fieldFull,children:[(0,b.jsx)("label",{className:h.default.label,children:"Invoice Footer"}),(0,b.jsx)("textarea",{value:l.invoiceFooter,onChange:a=>z("invoiceFooter",a.target.value),className:h.default.textarea,placeholder:"Footer text for invoices (e.g., Thank you for your business!)",disabled:p,rows:2})]}),(0,b.jsxs)("div",{className:h.default.fieldFull,children:[(0,b.jsx)("label",{className:h.default.label,children:"Developer Note"}),(0,b.jsx)("input",{type:"text",value:l.invoiceDeveloperNote,onChange:a=>z("invoiceDeveloperNote",a.target.value),className:h.default.input,placeholder:"Developer/Software information",disabled:p}),(0,b.jsx)("small",{className:h.default.fieldHint,children:"Credit line for software developer (optional)"})]})]})]}),"financial"===v&&(0,b.jsxs)("div",{className:h.default.section,children:[(0,b.jsx)("h2",{className:h.default.sectionTitle,children:"Financial Configuration"}),(0,b.jsx)("div",{className:h.default.formGrid,children:(0,b.jsxs)("div",{className:h.default.field,children:[(0,b.jsx)("label",{className:h.default.label,children:"Default Credit Limit (LKR) *"}),(0,b.jsx)("input",{type:"number",value:l.defaultCreditLimit,onChange:a=>z("defaultCreditLimit",parseFloat(a.target.value)||0),onWheel:g.handleNumberInputWheel,className:h.default.input,placeholder:"100000",disabled:p,min:"0",step:"1000",required:!0}),(0,b.jsx)("small",{className:h.default.fieldHint,children:"Default credit limit for new customers"})]})})]}),"dates"===v&&(0,b.jsxs)("div",{className:h.default.section,children:[(0,b.jsx)("h2",{className:h.default.sectionTitle,children:"Due Date Options"}),(0,b.jsx)("p",{className:h.default.sectionDescription,children:"Configure available payment terms for credit invoices"}),(0,b.jsxs)("div",{className:h.default.dueDateOptions,children:[l.dueDateOptions.map((a,c)=>(0,b.jsxs)("div",{className:h.default.dueDateOption,children:[(0,b.jsxs)("div",{className:h.default.dueDateFields,children:[(0,b.jsxs)("div",{className:h.default.field,children:[(0,b.jsx)("label",{className:h.default.label,children:"Label"}),(0,b.jsx)("input",{type:"text",value:a.label,onChange:a=>A(c,"label",a.target.value),className:h.default.input,placeholder:"e.g., 1 Month",disabled:p})]}),(0,b.jsxs)("div",{className:h.default.field,children:[(0,b.jsx)("label",{className:h.default.label,children:"Days"}),(0,b.jsx)("input",{type:"number",value:a.days,onChange:a=>A(c,"days",parseInt(a.target.value)||0),onWheel:g.handleNumberInputWheel,className:h.default.input,placeholder:"30",disabled:p,min:"1"})]}),(0,b.jsx)("div",{className:h.default.field,children:(0,b.jsxs)("label",{className:h.default.checkboxLabel,children:[(0,b.jsx)("input",{type:"checkbox",checked:a.isDefault,onChange:a=>A(c,"isDefault",a.target.checked),className:h.default.checkbox,disabled:p}),(0,b.jsx)("span",{children:"Default"})]})})]}),(0,b.jsx)("button",{type:"button",onClick:()=>{m(a=>({...a,dueDateOptions:a.dueDateOptions.filter((a,b)=>b!==c)}))},className:h.default.removeOptionButton,disabled:p||l.dueDateOptions.length<=1,children:"Remove"})]},c)),(0,b.jsx)("button",{type:"button",onClick:()=>{m(a=>({...a,dueDateOptions:[...a.dueDateOptions,{label:"",days:30,isDefault:!1}]}))},className:h.default.addOptionButton,disabled:p,children:"+ Add Due Date Option"})]})]}),"display"===v&&(0,b.jsxs)("div",{className:h.default.section,children:[(0,b.jsx)("h3",{className:h.default.sectionTitle,children:"ðŸ“‹ Invoice Display Configuration"}),(0,b.jsx)("div",{className:h.default.sectionDescription,children:"Configure how invoice form fields behave during invoice creation"}),(0,b.jsxs)("div",{className:h.default.formGrid,children:[(0,b.jsx)("div",{className:h.default.fieldGroup,children:(0,b.jsx)("div",{className:h.default.toggleField,children:(0,b.jsxs)("label",{className:h.default.toggleLabel,children:[(0,b.jsx)("input",{type:"checkbox",checked:l.isSellingPriceReadonly,onChange:a=>z("isSellingPriceReadonly",a.target.checked),className:h.default.toggleInput,disabled:p}),(0,b.jsx)("span",{className:h.default.toggleSlider}),(0,b.jsxs)("div",{className:h.default.toggleInfo,children:[(0,b.jsx)("span",{className:h.default.toggleTitle,children:"Make Selling Price Read-Only"}),(0,b.jsx)("span",{className:h.default.toggleDescription,children:"When enabled, selling price fields will be read-only in invoice creation"})]})]})})}),(0,b.jsx)("div",{className:h.default.fieldGroup,children:(0,b.jsx)("div",{className:h.default.toggleField,children:(0,b.jsxs)("label",{className:h.default.toggleLabel,children:[(0,b.jsx)("input",{type:"checkbox",checked:l.isDiscountReadonly,onChange:a=>z("isDiscountReadonly",a.target.checked),className:h.default.toggleInput,disabled:p}),(0,b.jsx)("span",{className:h.default.toggleSlider}),(0,b.jsxs)("div",{className:h.default.toggleInfo,children:[(0,b.jsx)("span",{className:h.default.toggleTitle,children:"Make Discount Read-Only"}),(0,b.jsx)("span",{className:h.default.toggleDescription,children:"When enabled, discount fields will be read-only in invoice creation"})]})]})})}),(0,b.jsx)("div",{className:h.default.fieldGroup,children:(0,b.jsx)("div",{className:h.default.toggleField,children:(0,b.jsxs)("label",{className:h.default.toggleLabel,children:[(0,b.jsx)("input",{type:"checkbox",checked:l.showTotalDiscountFromItems,onChange:a=>z("showTotalDiscountFromItems",a.target.checked),className:h.default.toggleInput,disabled:p}),(0,b.jsx)("span",{className:h.default.toggleSlider}),(0,b.jsxs)("div",{className:h.default.toggleInfo,children:[(0,b.jsx)("span",{className:h.default.toggleTitle,children:"Show Discount Features"}),(0,b.jsx)("span",{className:h.default.toggleDescription,children:'When enabled, shows the Discount column in invoice items table and "Total Discount from Items" row in totals section'})]})]})})}),(0,b.jsx)("div",{className:h.default.fieldGroup,children:(0,b.jsx)("div",{className:h.default.toggleField,children:(0,b.jsxs)("label",{className:h.default.toggleLabel,children:[(0,b.jsx)("input",{type:"checkbox",checked:l.hideCostProfit,onChange:a=>z("hideCostProfit",a.target.checked),className:h.default.toggleInput,disabled:p}),(0,b.jsx)("span",{className:h.default.toggleSlider}),(0,b.jsxs)("div",{className:h.default.toggleInfo,children:[(0,b.jsx)("span",{className:h.default.toggleTitle,children:"Hide Cost & Profit Information"}),(0,b.jsx)("span",{className:h.default.toggleDescription,children:"When enabled, cost and profit columns/sections will be hidden in invoice pages"})]})]})})}),(0,b.jsxs)("div",{className:h.default.fieldGroup,children:[(0,b.jsxs)("div",{className:h.default.field,children:[(0,b.jsx)("label",{className:h.default.label,children:"Cash Discount Percentage (%)"}),(0,b.jsx)("input",{type:"number",value:l.totalBalanceDiscountPercent,onChange:a=>z("totalBalanceDiscountPercent",parseFloat(a.target.value)||0),onWheel:g.handleNumberInputWheel,className:h.default.input,placeholder:"5",disabled:p,min:"0",max:"100",step:"0.1"}),(0,b.jsx)("small",{className:h.default.fieldHint,children:"Cash discount percentage used in invoices (dynamically applied)"})]}),(0,b.jsx)("div",{className:h.default.toggleField,children:(0,b.jsxs)("label",{className:h.default.toggleLabel,children:[(0,b.jsx)("input",{type:"checkbox",checked:l.showTotalBalanceDiscount,onChange:a=>z("showTotalBalanceDiscount",a.target.checked),className:h.default.toggleInput,disabled:p}),(0,b.jsx)("span",{className:h.default.toggleSlider}),(0,b.jsxs)("div",{className:h.default.toggleInfo,children:[(0,b.jsx)("span",{className:h.default.toggleTitle,children:"Hide Cash Discount Option"}),(0,b.jsx)("span",{className:h.default.toggleDescription,children:"When enabled, the Cash Discount option will be hidden from invoice creation"})]})]})})]})]})]}),"orders"===v&&(0,b.jsxs)("div",{className:h.default.section,children:[(0,b.jsx)("h3",{className:h.default.sectionTitle,children:"ðŸ“¦ Orders Page Configuration"}),(0,b.jsx)("div",{className:h.default.sectionDescription,children:"Control visibility and behavior of elements in the Orders page"}),(0,b.jsxs)("div",{className:h.default.formGrid,children:[(0,b.jsx)("div",{className:h.default.fieldGroup,children:(0,b.jsx)("div",{className:h.default.toggleField,children:(0,b.jsxs)("label",{className:h.default.toggleLabel,children:[(0,b.jsx)("input",{type:"checkbox",checked:l.hideSellingPrice,onChange:a=>z("hideSellingPrice",a.target.checked),className:h.default.toggleInput,disabled:p}),(0,b.jsx)("span",{className:h.default.toggleSlider}),(0,b.jsxs)("div",{className:h.default.toggleInfo,children:[(0,b.jsx)("span",{className:h.default.toggleTitle,children:"Make Selling Price Column Read-Only"}),(0,b.jsx)("span",{className:h.default.toggleDescription,children:"When enabled, the Selling Price column in orders will be read-only and cannot be edited"})]})]})})}),(0,b.jsx)("div",{className:h.default.fieldGroup,children:(0,b.jsx)("div",{className:h.default.toggleField,children:(0,b.jsxs)("label",{className:h.default.toggleLabel,children:[(0,b.jsx)("input",{type:"checkbox",checked:l.hideDiscount,onChange:a=>z("hideDiscount",a.target.checked),className:h.default.toggleInput,disabled:p}),(0,b.jsx)("span",{className:h.default.toggleSlider}),(0,b.jsxs)("div",{className:h.default.toggleInfo,children:[(0,b.jsx)("span",{className:h.default.toggleTitle,children:"Make Discount Column Read-Only"}),(0,b.jsx)("span",{className:h.default.toggleDescription,children:"When enabled, the Discount column in orders will be read-only and cannot be edited"})]})]})})}),(0,b.jsx)("div",{className:h.default.fieldGroup,children:(0,b.jsx)("div",{className:h.default.toggleField,children:(0,b.jsxs)("label",{className:h.default.toggleLabel,children:[(0,b.jsx)("input",{type:"checkbox",checked:l.hideFreeProducts,onChange:a=>z("hideFreeProducts",a.target.checked),className:h.default.toggleInput,disabled:p}),(0,b.jsx)("span",{className:h.default.toggleSlider}),(0,b.jsxs)("div",{className:h.default.toggleInfo,children:[(0,b.jsx)("span",{className:h.default.toggleTitle,children:"Hide Add Free Products Feature"}),(0,b.jsx)("span",{className:h.default.toggleDescription,children:'When enabled, the "Add Free Products" feature will be hidden from the orders page'})]})]})})}),(0,b.jsx)("div",{className:h.default.fieldGroup,children:(0,b.jsx)("div",{className:h.default.toggleField,children:(0,b.jsxs)("label",{className:h.default.toggleLabel,children:[(0,b.jsx)("input",{type:"checkbox",checked:l.hideCashDiscount,onChange:a=>z("hideCashDiscount",a.target.checked),className:h.default.toggleInput,disabled:p}),(0,b.jsx)("span",{className:h.default.toggleSlider}),(0,b.jsxs)("div",{className:h.default.toggleInfo,children:[(0,b.jsx)("span",{className:h.default.toggleTitle,children:"Hide Enable Cash Discount (%) Feature"}),(0,b.jsx)("span",{className:h.default.toggleDescription,children:'When enabled, the "Enable Cash Discount (%)" option will be hidden from the orders page'})]})]})})})]})]})]}),t&&(0,b.jsx)("div",{className:h.default.error,children:t}),r&&(0,b.jsx)("div",{className:h.default.success,children:r}),n&&(0,b.jsx)("div",{className:h.default.loading,children:"Loading settings..."}),(0,b.jsx)("div",{className:h.default.saveSection,children:(0,b.jsx)("button",{onClick:B,className:h.default.saveButton,disabled:p||n,children:p?"Saving...":"Save Settings"})})]}):(0,b.jsx)("div",{className:h.default.accessDenied,children:"Access denied to software settings"})}])}];

//# sourceMappingURL=src_app_softwareSettings_13126aa7._.js.map