(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8244,e=>{e.v({active:"users-module__MIXvaW__active",cancel:"users-module__MIXvaW__cancel",cardAccessPages:"users-module__MIXvaW__cardAccessPages",cardAction:"users-module__MIXvaW__cardAction",cardActions:"users-module__MIXvaW__cardActions",cardBody:"users-module__MIXvaW__cardBody",cardDate:"users-module__MIXvaW__cardDate",cardError:"users-module__MIXvaW__cardError",cardField:"users-module__MIXvaW__cardField",cardHeader:"users-module__MIXvaW__cardHeader",cardLabel:"users-module__MIXvaW__cardLabel",cardLoading:"users-module__MIXvaW__cardLoading",cardStatus:"users-module__MIXvaW__cardStatus",cardUserInfo:"users-module__MIXvaW__cardUserInfo",cardUserName:"users-module__MIXvaW__cardUserName",cardUsername:"users-module__MIXvaW__cardUsername",cardValue:"users-module__MIXvaW__cardValue",editing:"users-module__MIXvaW__editing",error:"users-module__MIXvaW__error","form-error":"users-module__MIXvaW__form-error","form-fieldset":"users-module__MIXvaW__form-fieldset","form-help":"users-module__MIXvaW__form-help","form-label":"users-module__MIXvaW__form-label","form-legend":"users-module__MIXvaW__form-legend","loading-spinner":"users-module__MIXvaW__loading-spinner",mobileCard:"users-module__MIXvaW__mobileCard",mobileEditAction:"users-module__MIXvaW__mobileEditAction",mobileEditActions:"users-module__MIXvaW__mobileEditActions",mobileEditCheckbox:"users-module__MIXvaW__mobileEditCheckbox",mobileEditCheckboxGrid:"users-module__MIXvaW__mobileEditCheckboxGrid",mobileEditCheckboxText:"users-module__MIXvaW__mobileEditCheckboxText",mobileEditField:"users-module__MIXvaW__mobileEditField",mobileEditForm:"users-module__MIXvaW__mobileEditForm",mobileEditGrid:"users-module__MIXvaW__mobileEditGrid",mobileEditInput:"users-module__MIXvaW__mobileEditInput",mobileEditLabel:"users-module__MIXvaW__mobileEditLabel",mobileEmptyDescription:"users-module__MIXvaW__mobileEmptyDescription",mobileEmptyIcon:"users-module__MIXvaW__mobileEmptyIcon",mobileEmptyState:"users-module__MIXvaW__mobileEmptyState",mobileEmptyTitle:"users-module__MIXvaW__mobileEmptyTitle",mobileErrorMessage:"users-module__MIXvaW__mobileErrorMessage",mobileTableToggle:"users-module__MIXvaW__mobileTableToggle",multiSelectDropdown:"users-module__MIXvaW__multiSelectDropdown",multiSelectInput:"users-module__MIXvaW__multiSelectInput",multiSelectOption:"users-module__MIXvaW__multiSelectOption",multiSelectOptions:"users-module__MIXvaW__multiSelectOptions",multiSelectRemove:"users-module__MIXvaW__multiSelectRemove",multiSelectTag:"users-module__MIXvaW__multiSelectTag",multiSelectTags:"users-module__MIXvaW__multiSelectTags",primary:"users-module__MIXvaW__primary","primary-action":"users-module__MIXvaW__primary-action","required-asterisk":"users-module__MIXvaW__required-asterisk",save:"users-module__MIXvaW__save",secondary:"users-module__MIXvaW__secondary",spin:"users-module__MIXvaW__spin","sr-only":"users-module__MIXvaW__sr-only",success:"users-module__MIXvaW__success","themed-button":"users-module__MIXvaW__themed-button",toggleButton:"users-module__MIXvaW__toggleButton",usersContainer:"users-module__MIXvaW__usersContainer",warning:"users-module__MIXvaW__warning"})},49196,e=>{"use strict";var s=e.i(43476),a=e.i(71645),i=e.i(8244);let l=(0,a.memo)(({type:e="spinner",size:a="medium",color:i="primary",text:l="",overlay:d=!1,fullScreen:r=!1})=>(0,s.jsx)("div",{className:`loading-container ${d?"loading-overlay":""} ${r?"loading-fullscreen":""}`,children:(0,s.jsxs)("div",{className:"loading-content",children:[(()=>{switch(e){case"spinner":default:return(0,s.jsx)("div",{className:`loading-spinner loading-${a} loading-${i}`,children:(0,s.jsx)("div",{className:"spinner-circle"})});case"dots":return(0,s.jsxs)("div",{className:`loading-dots loading-${a} loading-${i}`,children:[(0,s.jsx)("div",{className:"dot dot-1"}),(0,s.jsx)("div",{className:"dot dot-2"}),(0,s.jsx)("div",{className:"dot dot-3"})]});case"pulse":return(0,s.jsxs)("div",{className:`loading-pulse loading-${a} loading-${i}`,children:[(0,s.jsx)("div",{className:"pulse-circle pulse-1"}),(0,s.jsx)("div",{className:"pulse-circle pulse-2"}),(0,s.jsx)("div",{className:"pulse-circle pulse-3"})]});case"bars":return(0,s.jsxs)("div",{className:`loading-bars loading-${a} loading-${i}`,children:[(0,s.jsx)("div",{className:"bar bar-1"}),(0,s.jsx)("div",{className:"bar bar-2"}),(0,s.jsx)("div",{className:"bar bar-3"}),(0,s.jsx)("div",{className:"bar bar-4"}),(0,s.jsx)("div",{className:"bar bar-5"})]});case"wave":return(0,s.jsxs)("div",{className:`loading-wave loading-${a} loading-${i}`,children:[(0,s.jsx)("div",{className:"wave-bar wave-1"}),(0,s.jsx)("div",{className:"wave-bar wave-2"}),(0,s.jsx)("div",{className:"wave-bar wave-3"}),(0,s.jsx)("div",{className:"wave-bar wave-4"}),(0,s.jsx)("div",{className:"wave-bar wave-5"})]});case"skeleton":return(0,s.jsxs)("div",{className:`loading-skeleton loading-${a}`,children:[(0,s.jsx)("div",{className:"skeleton-line skeleton-title"}),(0,s.jsx)("div",{className:"skeleton-line skeleton-text"}),(0,s.jsx)("div",{className:"skeleton-line skeleton-text short"})]})}})(),l&&(0,s.jsx)("div",{className:"loading-text",children:l})]})}));l.displayName="LoadingAnimation";let d=(0,a.memo)(({loading:e=!1,loadingText:a="Loading...",children:i,variant:d="primary",size:r="medium",fullWidth:t=!1,className:c="",disabled:n,...o})=>{let m=["loading-button",`btn-${d}`,`btn-${r}`,t?"btn-full-width":"",e?"btn-loading":"",c].filter(Boolean).join(" ");return(0,s.jsx)("button",{className:m,disabled:n||e,...o,children:e?(0,s.jsxs)("div",{className:"btn-loading-content",children:[(0,s.jsx)(l,{type:"spinner",size:"small",color:"primary"===d?"primary":"secondary"}),(0,s.jsx)("span",{className:"btn-loading-text",children:a})]}):i})});d.displayName="LoadingButton";let r=(0,a.memo)(({loading:e,children:a,loadingText:i="Loading...",type:d="pulse",overlay:r=!1,minHeight:t="200px"})=>e?(0,s.jsx)("div",{className:"page-loader",style:{minHeight:r?"100vh":t},children:(0,s.jsx)(l,{type:d,size:"large",color:"primary",text:i,overlay:r,fullScreen:r})}):(0,s.jsx)(s.Fragment,{children:a}));r.displayName="PageLoader";var t=e.i(57951),c=e.i(38341);e.s(["default",0,()=>{let{user:e,isLoading:l}=(0,t.useRequireAuth)("users"),{startLoading:n,stopLoading:o,isLoading:m}=((e={})=>{let[s,i]=(0,a.useState)(e),l=(0,a.useCallback)((e,s)=>{i(a=>({...a,[e]:s}))},[]),d=(0,a.useCallback)(e=>{l(e,!0)},[l]),r=(0,a.useCallback)(e=>{l(e,!1)},[l]),t=(0,a.useCallback)(e=>s[e]||!1,[s]),c=(0,a.useCallback)(()=>Object.values(s).some(e=>e),[s]);return{loadingStates:s,setLoading:l,startLoading:d,stopLoading:r,isLoading:t,isAnyLoading:c,resetLoading:(0,a.useCallback)(()=>{i({})},[])}})(),[u,h]=(0,a.useState)([]),[_,p]=(0,a.useState)(!0),[b,v]=(0,a.useState)(null),[x,g]=(0,a.useState)(!1),[j,N]=(0,a.useState)({}),[f,w]=(0,a.useState)({}),[y,C]=(0,a.useState)(!1),[$,E]=(0,a.useState)(0),[I,P]=(0,a.useState)({name:"",username:"",password:"",confirmPassword:"",accessPages:[]}),k=(0,a.useMemo)(()=>(0,c.getAvailablePages)(),[]);if(l)return(0,s.jsx)("div",{className:"page-container",children:(0,s.jsxs)("div",{className:"page-header",children:[(0,s.jsx)("h1",{children:"Loading..."}),(0,s.jsx)("p",{className:"page-subtitle",children:"Please wait while we verify your access"})]})});let S=(0,a.useCallback)(async()=>{try{p(!0);let e=await fetch("/api/users",{cache:"no-store"});if(e.ok){let s=await e.json();h(s.map(e=>({...e,isEditing:!1})))}else throw Error("Failed to fetch users")}catch(e){N({fetch:"Failed to load users. Please refresh the page."})}finally{p(!1)}},[]);(0,a.useEffect)(()=>{S()},[S]),(0,a.useEffect)(()=>{let e=()=>{let e=window.innerWidth;E(e),C(e<640)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.useEffect)(()=>{if(j.action||j.fetch){let e=setTimeout(()=>{N(e=>({...e,action:"",fetch:""}))},5e3);return()=>clearTimeout(e)}},[j.action,j.fetch]);let M=(0,a.useCallback)(()=>{let e={};return I.name.trim()?I.name.length<2&&(e.name="Name must be at least 2 characters"):e.name="Name is required",I.username.trim()?I.username.length<3?e.username="Username must be at least 3 characters":/^[a-zA-Z0-9_]+$/.test(I.username)?u.some(e=>e.username.toLowerCase()===I.username.toLowerCase())&&(e.username="Username already exists"):e.username="Username can only contain letters, numbers, and underscores":e.username="Username is required",I.password?I.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",I.password!==I.confirmPassword&&(e.confirmPassword="Passwords do not match"),0===I.accessPages.length&&(e.accessPages="Please select at least one access page"),N(e),0===Object.keys(e).length},[I,u]),W=(0,a.useCallback)(e=>{let s=f[e];return!(!s||!s.name.trim()||s.name.length<2||!s.username.trim()||s.username.length<3||!/^[a-zA-Z0-9_]+$/.test(s.username)||u.some(a=>a.id!==e&&a.username.toLowerCase()===s.username.toLowerCase()))&&!!s.password&&!(s.password.length<6)&&0!==s.accessPages.length},[f,u]),A=(0,a.useCallback)(e=>{let s=f[e];if(!s)return!1;let a={};return s.name.trim()?s.name.length<2&&(a[`edit_name_${e}`]="Name must be at least 2 characters"):a[`edit_name_${e}`]="Name is required",s.username.trim()?s.username.length<3?a[`edit_username_${e}`]="Username must be at least 3 characters":/^[a-zA-Z0-9_]+$/.test(s.username)?u.some(a=>a.id!==e&&a.username.toLowerCase()===s.username.toLowerCase())&&(a[`edit_username_${e}`]="Username already exists"):a[`edit_username_${e}`]="Username can only contain letters, numbers, and underscores":a[`edit_username_${e}`]="Username is required",s.password?s.password.length<6&&(a[`edit_password_${e}`]="Password must be at least 6 characters"):a[`edit_password_${e}`]="Password is required",0===s.accessPages.length&&(a[`edit_access_${e}`]="Please select at least one access page"),N(e=>({...e,...a})),0===Object.keys(a).length},[f,u]),X=(0,a.useCallback)(()=>{P({name:"",username:"",password:"",confirmPassword:"",accessPages:[]}),N({}),g(!1)},[]),U=(0,a.useCallback)(async e=>{if(e.preventDefault(),M()){v(-1),n("addUser");try{let e=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:I.name.trim(),username:I.username.trim(),password:I.password,accessPages:I.accessPages})});if(e.ok)await S(),X();else{let s=await e.json();N({submit:s.error||"Failed to create user"})}}catch(e){N({submit:"Network error. Please try again."})}finally{v(null),o("addUser")}}},[I,M,S,X]),L=(0,a.useCallback)(e=>{w(s=>({...s,[e.id]:{name:e.name,username:e.username,password:"",accessPages:[...e.accessPages]}})),h(s=>s.map(s=>({...s,isEditing:s.id===e.id}))),N({})},[]),T=(0,a.useCallback)(e=>{h(s=>s.map(s=>s.id===e?{...s,isEditing:!1}:s)),w(s=>{let a={...s};return delete a[e],a}),N(s=>{let a={...s};return Object.keys(a).forEach(s=>{s.includes(`_${e}`)&&delete a[s]}),a})},[]),F=(0,a.useCallback)(async e=>{if(!A(e))return;let s=f[e];v(e),n(`editUser_${e}`);try{let a=await fetch(`/api/users/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s.name.trim(),username:s.username.trim(),password:s.password,accessPages:s.accessPages,isActive:u.find(s=>s.id===e)?.isActive||!0})});if(a.ok)await S(),T(e);else{let s=await a.json();N(a=>({...a,[`edit_submit_${e}`]:s.error||"Failed to update user"}))}}catch(s){N(s=>({...s,[`edit_submit_${e}`]:"Network error. Please try again."}))}finally{v(null),o(`editUser_${e}`)}},[f,A,u,S,T]),D=(0,a.useCallback)(e=>{let s=u.find(s=>s.id===e);s&&(s.isEditing?T(e):L(s))},[u,T,L]),O=(0,a.useCallback)(async e=>{let s=u.find(s=>s.id===e);if(s&&b!==e){v(e),n(`toggleStatus_${e}`),h(s=>s.map(s=>s.id===e?{...s,isActive:!s.isActive}:s));try{if(!(await fetch(`/api/users/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s,isActive:!s.isActive})})).ok)throw h(a=>a.map(a=>a.id===e?{...a,isActive:s.isActive}:a)),Error("Failed to update user status")}catch(e){N({action:"Failed to update user status"})}finally{v(null),o(`toggleStatus_${e}`)}}},[u,b]),q=(0,a.useCallback)(async(e,s)=>{if(confirm(`Are you sure you want to delete user "${s}"? This action cannot be undone.`)){v(e),n(`deleteUser_${e}`);try{if((await fetch(`/api/users/${e}`,{method:"DELETE"})).ok)h(s=>s.filter(s=>s.id!==e));else throw Error("Failed to delete user")}catch(e){N({action:"Failed to delete user"}),await S()}finally{v(null),o(`deleteUser_${e}`)}}},[b,S]),B=(0,a.useCallback)((e,s)=>{P(a=>({...a,accessPages:s?[...a.accessPages,e]:a.accessPages.filter(s=>s!==e)}))},[]);(0,a.useCallback)((e,s,a)=>{w(i=>({...i,[e]:{...i[e],accessPages:a?[...i[e].accessPages,s]:i[e].accessPages.filter(e=>e!==s)}}))},[]);let R=(0,a.memo)(({user:e})=>(0,s.jsxs)("div",{className:`${i.default.mobileCard} ${e.isEditing?i.default.editing:""} ${b===e.id?i.default.cardLoading:""}`,children:[(0,s.jsxs)("div",{className:i.default.cardHeader,children:[(0,s.jsxs)("div",{className:i.default.cardUserInfo,children:[(0,s.jsx)("div",{className:i.default.cardUserName,children:e.name}),(0,s.jsxs)("div",{className:i.default.cardUsername,children:["@",e.username]})]}),(0,s.jsx)("div",{className:i.default.cardStatus,children:(0,s.jsx)("span",{className:`status-badge ${e.isActive?"active":"inactive"}`,children:e.isActive?"Active":"Inactive"})})]}),e.isEditing?(0,s.jsxs)("div",{className:i.default.mobileEditForm,children:[(0,s.jsxs)("div",{className:i.default.mobileEditGrid,children:[(0,s.jsxs)("div",{className:i.default.mobileEditField,children:[(0,s.jsx)("label",{className:i.default.mobileEditLabel,children:"Name *"}),(0,s.jsx)("input",{type:"text",className:i.default.mobileEditInput,value:f[e.id]?.name||"",onChange:s=>w(a=>({...a,[e.id]:{...a[e.id],name:s.target.value}})),placeholder:"Enter name",disabled:b===e.id}),j[`edit_name_${e.id}`]&&(0,s.jsx)("span",{className:"error-text",children:j[`edit_name_${e.id}`]})]}),(0,s.jsxs)("div",{className:i.default.mobileEditField,children:[(0,s.jsx)("label",{className:i.default.mobileEditLabel,children:"Username *"}),(0,s.jsx)("input",{type:"text",className:i.default.mobileEditInput,value:f[e.id]?.username||"",onChange:s=>w(a=>({...a,[e.id]:{...a[e.id],username:s.target.value}})),placeholder:"Enter username",disabled:b===e.id}),j[`edit_username_${e.id}`]&&(0,s.jsx)("span",{className:"error-text",children:j[`edit_username_${e.id}`]})]}),(0,s.jsxs)("div",{className:i.default.mobileEditField,children:[(0,s.jsx)("label",{className:i.default.mobileEditLabel,children:"New Password *"}),(0,s.jsx)("input",{type:"password",className:i.default.mobileEditInput,value:f[e.id]?.password||"",onChange:s=>w(a=>({...a,[e.id]:{...a[e.id],password:s.target.value}})),placeholder:"New password",disabled:b===e.id}),j[`edit_password_${e.id}`]&&(0,s.jsx)("span",{className:"error-text",children:j[`edit_password_${e.id}`]})]}),(0,s.jsxs)("div",{className:i.default.mobileEditField,children:[(0,s.jsx)("label",{className:i.default.mobileEditLabel,children:"Access Pages *"}),(0,s.jsxs)("div",{className:i.default.multiSelectDropdown,children:[(0,s.jsx)("input",{type:"text",className:i.default.multiSelectInput,placeholder:"Search pages...",value:f[e.id]?.accessSearch||"",onChange:s=>w(a=>({...a,[e.id]:{...a[e.id],accessSearch:s.target.value}})),disabled:b===e.id}),(0,s.jsx)("div",{className:i.default.multiSelectOptions,children:k.filter(s=>{let a=f[e.id]?.accessSearch||"";return!f[e.id]?.accessPages?.includes(s.id)&&(""===a||s.name.toLowerCase().includes(a.toLowerCase())||s.id.toLowerCase().includes(a.toLowerCase()))}).map(a=>(0,s.jsx)("div",{className:i.default.multiSelectOption,onClick:()=>w(s=>({...s,[e.id]:{...s[e.id],accessPages:[...s[e.id]?.accessPages||[],a.id],accessSearch:""}})),children:a.name},a.id))}),(0,s.jsx)("div",{className:i.default.multiSelectTags,children:(f[e.id]?.accessPages||[]).map(a=>(0,s.jsxs)("span",{className:i.default.multiSelectTag,children:[k.find(e=>e.id===a)?.name||a,(0,s.jsx)("button",{type:"button",className:i.default.multiSelectRemove,onClick:()=>w(s=>({...s,[e.id]:{...s[e.id],accessPages:s[e.id].accessPages.filter(e=>e!==a)}})),disabled:b===e.id,children:"‚úï"})]},a))})]}),j[`edit_access_${e.id}`]&&(0,s.jsx)("span",{className:"error-text",children:j[`edit_access_${e.id}`]})]})]}),(0,s.jsxs)("div",{className:i.default.mobileEditActions,children:[(0,s.jsx)(d,{className:`${i.default.mobileEditAction} ${i.default.save}`,onClick:()=>F(e.id),disabled:b===e.id||!W(e.id),loading:m(`editUser_${e.id}`),loadingText:"Saving...",children:"‚úì Save Changes"}),(0,s.jsx)("button",{className:`${i.default.mobileEditAction} ${i.default.cancel}`,onClick:()=>T(e.id),disabled:b===e.id,children:"‚úï Cancel"})]}),j[`edit_submit_${e.id}`]&&(0,s.jsx)("div",{className:i.default.mobileErrorMessage,children:j[`edit_submit_${e.id}`]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:i.default.cardBody,children:[(0,s.jsxs)("div",{className:i.default.cardField,children:[(0,s.jsx)("div",{className:i.default.cardLabel,children:"Password"}),(0,s.jsx)("div",{className:i.default.cardValue,children:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"})]}),(0,s.jsxs)("div",{className:i.default.cardField,children:[(0,s.jsx)("div",{className:i.default.cardLabel,children:"Access Pages"}),(0,s.jsx)("div",{className:`${i.default.cardValue} ${i.default.cardAccessPages}`,children:e.accessPages.map(e=>(0,s.jsx)("span",{className:"access-tag",children:k.find(s=>s.id===e)?.name||e},e))})]}),(0,s.jsxs)("div",{className:i.default.cardField,children:[(0,s.jsx)("div",{className:i.default.cardLabel,children:"Created"}),(0,s.jsx)("div",{className:`${i.default.cardValue} ${i.default.cardDate}`,children:new Date(e.createdAt).toLocaleDateString()})]})]}),(0,s.jsxs)("div",{className:i.default.cardActions,children:[(0,s.jsx)(d,{className:`${i.default.cardAction} ${e.isActive?i.default.warning:i.default.success}`,onClick:()=>O(e.id),title:e.isActive?"Deactivate User":"Activate User",disabled:b===e.id,loading:m(`toggleStatus_${e.id}`),loadingText:e.isActive?"Deactivating...":"Activating...",children:e.isActive?"‚è∏Ô∏è Deactivate":"‚ñ∂Ô∏è Activate"}),(0,s.jsx)("button",{className:`${i.default.cardAction} ${i.default.primary}`,onClick:()=>D(e.id),title:"Edit User",disabled:null!==b,children:"‚úèÔ∏è Edit"}),(0,s.jsx)(d,{className:`${i.default.cardAction} ${i.default.error}`,onClick:()=>q(e.id,e.name),title:"Delete User",disabled:b===e.id,loading:m(`deleteUser_${e.id}`),loadingText:"Deleting...",children:"üóëÔ∏è Delete"})]})]})]}));return R.displayName="UserCard",(0,s.jsx)(r,{loading:_,loadingText:"Loading users...",children:(0,s.jsxs)("div",{className:`page-container ${i.default.usersContainer}`,children:[(0,s.jsxs)("div",{className:"page-header",children:[(0,s.jsx)("h1",{children:"Users Management"}),(0,s.jsx)("p",{className:"page-subtitle",children:"Manage user accounts and permissions"})]}),(0,s.jsxs)("div",{className:"page-content",children:[(j.fetch||j.action)&&(0,s.jsxs)("div",{className:"error-banner",children:[j.fetch||j.action,(0,s.jsx)("button",{className:"error-close",onClick:()=>N({}),title:"Close error",children:"‚úï"})]}),(0,s.jsxs)("div",{className:"users-actions",children:[(0,s.jsx)("button",{className:"themed-button",onClick:()=>g(!x),disabled:null!==b,children:x?"‚úï Cancel":"+ Add New User"}),(0,s.jsx)(d,{className:"themed-button secondary",onClick:S,disabled:_||null!==b,title:"Refresh users list",loading:_,loadingText:"Loading...",children:"‚Üª Refresh"})]}),$>0&&$<768&&(0,s.jsxs)("div",{className:i.default.mobileTableToggle,children:[(0,s.jsx)("button",{className:`${i.default.toggleButton} ${!y?i.default.active:""}`,onClick:()=>C(!1),children:"üìä Table View"}),(0,s.jsx)("button",{className:`${i.default.toggleButton} ${y?i.default.active:""}`,onClick:()=>C(!0),children:"üì± Card View"})]}),x&&(0,s.jsxs)("div",{className:"add-user-form",children:[(0,s.jsx)("h3",{children:"Add New User"}),(0,s.jsxs)("form",{onSubmit:U,children:[(0,s.jsxs)("div",{className:"form-grid",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{htmlFor:"name",className:"form-label",children:["Full Name ",(0,s.jsx)("span",{className:"required-asterisk",children:"*"})]}),(0,s.jsx)("input",{id:"name",type:"text",className:"themed-input",value:I.name,onChange:e=>P({...I,name:e.target.value}),placeholder:"Enter full name",disabled:-1===b,autoComplete:"name","aria-describedby":j.name?"name-error":void 0,"aria-invalid":j.name?"true":"false"}),j.name&&(0,s.jsx)("span",{id:"name-error",className:"error-text",role:"alert",children:j.name})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{htmlFor:"username",className:"form-label",children:["Username ",(0,s.jsx)("span",{className:"required-asterisk",children:"*"})]}),(0,s.jsx)("input",{id:"username",type:"text",className:"themed-input",value:I.username,onChange:e=>P({...I,username:e.target.value}),placeholder:"Enter username",disabled:-1===b,autoComplete:"username","aria-describedby":j.username?"username-error":void 0,"aria-invalid":j.username?"true":"false"}),j.username&&(0,s.jsx)("span",{id:"username-error",className:"error-text",role:"alert",children:j.username})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{htmlFor:"password",className:"form-label",children:["Password ",(0,s.jsx)("span",{className:"required-asterisk",children:"*"})]}),(0,s.jsx)("input",{id:"password",type:"password",className:"themed-input",value:I.password,onChange:e=>P({...I,password:e.target.value}),placeholder:"Enter secure password",disabled:-1===b,autoComplete:"new-password","aria-describedby":j.password?"password-error":"password-help","aria-invalid":j.password?"true":"false"}),(0,s.jsx)("small",{id:"password-help",className:"form-help",children:"Minimum 6 characters required"}),j.password&&(0,s.jsx)("span",{id:"password-error",className:"error-text",role:"alert",children:j.password})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{htmlFor:"confirmPassword",className:"form-label",children:["Confirm Password ",(0,s.jsx)("span",{className:"required-asterisk",children:"*"})]}),(0,s.jsx)("input",{id:"confirmPassword",type:"password",className:"themed-input",value:I.confirmPassword,onChange:e=>P({...I,confirmPassword:e.target.value}),placeholder:"Confirm your password",disabled:-1===b,autoComplete:"new-password","aria-describedby":j.confirmPassword?"confirm-password-error":void 0,"aria-invalid":j.confirmPassword?"true":"false"}),j.confirmPassword&&(0,s.jsx)("span",{id:"confirm-password-error",className:"error-text",role:"alert",children:j.confirmPassword})]})]}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsxs)("fieldset",{className:"form-fieldset",children:[(0,s.jsxs)("legend",{className:"form-legend",children:["Access Permissions ",(0,s.jsx)("span",{className:"required-asterisk",children:"*"})]}),(0,s.jsx)("div",{className:"access-pages-grid",role:"group","aria-labelledby":"access-pages-label",children:k.map(e=>(0,s.jsxs)("label",{className:"checkbox-label",children:[(0,s.jsx)("input",{type:"checkbox",checked:I.accessPages.includes(e.id),onChange:s=>B(e.id,s.target.checked),disabled:-1===b,"aria-describedby":`access-${e.id}-desc`}),(0,s.jsx)("span",{className:"checkbox-text",children:e.name}),(0,s.jsxs)("span",{id:`access-${e.id}-desc`,className:"sr-only",children:["Grant access to ",e.name]})]},e.id))}),j.accessPages&&(0,s.jsx)("span",{className:"error-text",role:"alert",children:j.accessPages})]})}),j.submit&&(0,s.jsx)("div",{className:"error-text form-error",role:"alert",children:j.submit}),(0,s.jsxs)("div",{className:"form-actions",children:[(0,s.jsx)(d,{type:"submit",className:"themed-button primary-action",disabled:-1===b,loading:m("addUser"),loadingText:"Creating User...","aria-describedby":"create-user-help",children:"‚úì Create User"}),(0,s.jsxs)("button",{type:"button",className:"themed-button secondary",onClick:X,disabled:-1===b,children:[(0,s.jsx)("span",{"aria-hidden":"true",children:"‚úï"}),(0,s.jsx)("span",{children:"Cancel"})]})]}),(0,s.jsx)("small",{id:"create-user-help",className:"form-help",children:"All required fields must be completed to create a user account"})]})]}),(0,s.jsxs)("div",{className:"users-list",children:[(0,s.jsxs)("h3",{children:["Current Users (",u.length,")"]}),_?(0,s.jsx)("div",{className:"loading-message",children:(0,s.jsx)("span",{children:"Loading users..."})}):0===u.length?(0,s.jsxs)("div",{className:i.default.mobileEmptyState,children:[(0,s.jsx)("div",{className:i.default.mobileEmptyIcon,children:"üë•"}),(0,s.jsx)("div",{className:i.default.mobileEmptyTitle,children:"No Users Found"}),(0,s.jsx)("div",{className:i.default.mobileEmptyDescription,children:"Get started by adding your first user account."})]}):(0,s.jsx)(s.Fragment,{children:($<640||y)&&$>0?(0,s.jsx)("div",{className:"mobile-cards-container",children:u.map(e=>(0,s.jsx)(R,{user:e},e.id))}):(0,s.jsx)("div",{className:`users-table-container ${$>1200?"":"scrollable"}`,children:(0,s.jsxs)("table",{className:"users-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Name"}),(0,s.jsx)("th",{children:"Username"}),(0,s.jsx)("th",{children:"Password"}),(0,s.jsx)("th",{children:"Access Pages"}),(0,s.jsx)("th",{children:"Status"}),(0,s.jsx)("th",{children:"Created"}),(0,s.jsx)("th",{children:"Actions"})]})}),(0,s.jsx)("tbody",{children:u.map(e=>(0,s.jsxs)("tr",{className:e.isEditing?"editing":"",children:[(0,s.jsx)("td",{children:e.isEditing?(0,s.jsxs)("div",{className:"edit-field",children:[(0,s.jsx)("input",{type:"text",className:"edit-input",value:f[e.id]?.name||"",onChange:s=>w(a=>({...a,[e.id]:{...a[e.id],name:s.target.value}})),placeholder:"Enter name",disabled:b===e.id}),j[`edit_name_${e.id}`]&&(0,s.jsx)("span",{className:"error-text",children:j[`edit_name_${e.id}`]})]}):(0,s.jsx)("div",{className:"user-info",children:(0,s.jsx)("span",{className:"user-name",children:e.name})})}),(0,s.jsx)("td",{children:e.isEditing?(0,s.jsxs)("div",{className:"edit-field",children:[(0,s.jsx)("input",{type:"text",className:"edit-input",value:f[e.id]?.username||"",onChange:s=>w(a=>({...a,[e.id]:{...a[e.id],username:s.target.value}})),placeholder:"Enter username",disabled:b===e.id}),j[`edit_username_${e.id}`]&&(0,s.jsx)("span",{className:"error-text",children:j[`edit_username_${e.id}`]})]}):(0,s.jsxs)("span",{className:"username",children:["@",e.username]})}),(0,s.jsx)("td",{children:e.isEditing?(0,s.jsxs)("div",{className:"edit-field",children:[(0,s.jsx)("input",{type:"password",className:"edit-input",value:f[e.id]?.password||"",onChange:s=>w(a=>({...a,[e.id]:{...a[e.id],password:s.target.value}})),placeholder:"New password",disabled:b===e.id}),j[`edit_password_${e.id}`]&&(0,s.jsx)("span",{className:"error-text",children:j[`edit_password_${e.id}`]})]}):(0,s.jsx)("span",{className:"password-hidden",children:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"})}),(0,s.jsx)("td",{children:e.isEditing?(0,s.jsxs)("div",{className:"edit-field",children:[(0,s.jsxs)("div",{className:i.default.multiSelectDropdown,children:[(0,s.jsx)("input",{type:"text",className:i.default.multiSelectInput,placeholder:"Search pages...",value:f[e.id]?.accessSearch||"",onChange:s=>w(a=>({...a,[e.id]:{...a[e.id],accessSearch:s.target.value}})),disabled:b===e.id}),(0,s.jsx)("div",{className:i.default.multiSelectOptions,children:k.filter(s=>{let a=f[e.id]?.accessSearch||"";return!f[e.id]?.accessPages?.includes(s.id)&&(""===a||s.name.toLowerCase().includes(a.toLowerCase())||s.id.toLowerCase().includes(a.toLowerCase()))}).map(a=>(0,s.jsx)("div",{className:i.default.multiSelectOption,onClick:()=>w(s=>({...s,[e.id]:{...s[e.id],accessPages:[...s[e.id]?.accessPages||[],a.id],accessSearch:""}})),children:a.name},a.id))}),(0,s.jsx)("div",{className:i.default.multiSelectTags,children:(f[e.id]?.accessPages||[]).map(a=>(0,s.jsxs)("span",{className:i.default.multiSelectTag,children:[k.find(e=>e.id===a)?.name||a,(0,s.jsx)("button",{type:"button",className:i.default.multiSelectRemove,onClick:()=>w(s=>({...s,[e.id]:{...s[e.id],accessPages:s[e.id].accessPages.filter(e=>e!==a)}})),disabled:b===e.id,children:"‚úï"})]},a))})]}),j[`edit_access_${e.id}`]&&(0,s.jsx)("span",{className:"error-text",children:j[`edit_access_${e.id}`]})]}):(0,s.jsx)("div",{className:"access-tags",children:e.accessPages.map(e=>(0,s.jsx)("span",{className:"access-tag",children:k.find(s=>s.id===e)?.name||e},e))})}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:`status-badge ${e.isActive?"active":"inactive"} ${b===e.id?"processing":""}`,children:e.isActive?"Active":"Inactive"})}),(0,s.jsx)("td",{children:new Date(e.createdAt).toLocaleDateString()}),(0,s.jsxs)("td",{children:[(0,s.jsx)("div",{className:"user-actions",children:e.isEditing?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"action-btn save-btn",onClick:()=>F(e.id),title:"Save Changes",disabled:b===e.id,children:b===e.id?"‚è≥":"‚úì"}),(0,s.jsx)("button",{className:"action-btn cancel-btn",onClick:()=>T(e.id),title:"Cancel Edit",disabled:b===e.id,children:"‚úï"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"action-btn toggle-btn",onClick:()=>O(e.id),title:e.isActive?"Deactivate User":"Activate User",disabled:b===e.id,children:b===e.id?"‚è≥":e.isActive?"‚è∏Ô∏è":"‚ñ∂Ô∏è"}),(0,s.jsx)("button",{className:"action-btn edit-btn",onClick:()=>D(e.id),title:"Edit User",disabled:null!==b,children:"‚úèÔ∏è"}),(0,s.jsx)("button",{className:"action-btn delete-btn",onClick:()=>q(e.id,e.name),title:"Delete User",disabled:b===e.id,children:b===e.id?"‚è≥":"üóëÔ∏è"})]})}),j[`edit_submit_${e.id}`]&&(0,s.jsx)("div",{className:"error-text",children:j[`edit_submit_${e.id}`]})]})]},e.id))})]})})})]})]})]})})}],49196)}]);