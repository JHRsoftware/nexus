(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16015,(e,t,s)=>{},98547,(e,t,s)=>{var a=e.i(47167);e.r(16015);var i=e.r(71645),n=i&&"object"==typeof i&&"default"in i?i:{default:i},l=void 0!==a.default&&a.default.env&&!0,r=function(e){return"[object String]"===Object.prototype.toString.call(e)},d=function(){function e(e){var t=void 0===e?{}:e,s=t.name,a=void 0===s?"stylesheet":s,i=t.optimizeForSpeed,n=void 0===i?l:i;o(r(a),"`name` must be a string"),this._name=a,this._deletedRulePlaceholder="#"+a+"-deleted-rule____{}",o("boolean"==typeof n,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=n,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var d="undefined"!=typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=d?d.getAttribute("content"):null}var t,s=e.prototype;return s.setOptimizeForSpeed=function(e){o("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),o(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},s.isOptimizeForSpeed=function(){return this._optimizeForSpeed},s.inject=function(){var e=this;if(o(!this._injected,"sheet already injected"),this._injected=!0,"undefined"!=typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(l||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,s){return"number"==typeof s?e._serverSheet.cssRules[s]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),s},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},s.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},s.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},s.insertRule=function(e,t){if(o(r(e),"`insertRule` accepts only strings"),"undefined"==typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var s=this.getSheet();"number"!=typeof t&&(t=s.cssRules.length);try{s.insertRule(e,t)}catch(t){return l||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var a=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,a))}return this._rulesCount++},s.replaceRule=function(e,t){if(this._optimizeForSpeed||"undefined"==typeof window){var s="undefined"!=typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!s.cssRules[e])return e;s.deleteRule(e);try{s.insertRule(t,e)}catch(a){l||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),s.insertRule(this._deletedRulePlaceholder,e)}}else{var a=this._tags[e];o(a,"old rule at index `"+e+"` not found"),a.textContent=t}return e},s.deleteRule=function(e){if("undefined"==typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];o(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},s.flush=function(){this._injected=!1,this._rulesCount=0,"undefined"!=typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},s.cssRules=function(){var e=this;return"undefined"==typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,s){return s?t=t.concat(Array.prototype.map.call(e.getSheetForTag(s).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},s.makeStyleTag=function(e,t,s){t&&o(r(t),"makeStyleTag accepts only strings as second parameter");var a=document.createElement("style");this._nonce&&a.setAttribute("nonce",this._nonce),a.type="text/css",a.setAttribute("data-"+e,""),t&&a.appendChild(document.createTextNode(t));var i=document.head||document.getElementsByTagName("head")[0];return s?i.insertBefore(a,s):i.appendChild(a),a},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(e.prototype,t),e}();function o(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var u=function(e){for(var t=5381,s=e.length;s;)t=33*t^e.charCodeAt(--s);return t>>>0},c={};function m(e,t){if(!t)return"jsx-"+e;var s=String(t),a=e+s;return c[a]||(c[a]="jsx-"+u(e+"-"+s)),c[a]}function h(e,t){"undefined"==typeof window&&(t=t.replace(/\/style/gi,"\\/style"));var s=e+t;return c[s]||(c[s]=t.replace(/__jsx-style-dynamic-selector/g,e)),c[s]}var p=function(){function e(e){var t=void 0===e?{}:e,s=t.styleSheet,a=void 0===s?null:s,i=t.optimizeForSpeed,n=void 0!==i&&i;this._sheet=a||new d({name:"styled-jsx",optimizeForSpeed:n}),this._sheet.inject(),a&&"boolean"==typeof n&&(this._sheet.setOptimizeForSpeed(n),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"undefined"==typeof window||this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var s=this.getIdAndRules(e),a=s.styleId,i=s.rules;if(a in this._instancesCounts){this._instancesCounts[a]+=1;return}var n=i.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[a]=n,this._instancesCounts[a]=1},t.remove=function(e){var t=this,s=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(s in this._instancesCounts,"styleId: `"+s+"` not found"),this._instancesCounts[s]-=1,this._instancesCounts[s]<1){var a=this._fromServer&&this._fromServer[s];a?(a.parentNode.removeChild(a),delete this._fromServer[s]):(this._indices[s].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[s]),delete this._instancesCounts[s]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],s=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return s[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,s;return t=this.cssRules(),void 0===(s=e)&&(s={}),t.map(function(e){var t=e[0],a=e[1];return n.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:s.nonce?s.nonce:void 0,dangerouslySetInnerHTML:{__html:a}})})},t.getIdAndRules=function(e){var t=e.children,s=e.dynamic,a=e.id;if(s){var i=m(a,s);return{styleId:i,rules:Array.isArray(t)?t.map(function(e){return h(i,e)}):[h(i,t)]}}return{styleId:m(a),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),_=i.createContext(null);function f(){return new p}function v(){return i.useContext(_)}_.displayName="StyleSheetContext";var y=n.default.useInsertionEffect||n.default.useLayoutEffect,g="undefined"!=typeof window?f():void 0;function b(e){var t=g||v();return t&&("undefined"==typeof window?t.add(e):y(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}b.dynamic=function(e){return e.map(function(e){return m(e[0],e[1])}).join(" ")},s.StyleRegistry=function(e){var t=e.registry,s=e.children,a=i.useContext(_),l=i.useState(function(){return a||t||f()})[0];return n.default.createElement(_.Provider,{value:l},s)},s.createStyleRegistry=f,s.style=b,s.useStyleRegistry=v},37902,(e,t,s)=>{t.exports=e.r(98547).style},11870,e=>{"use strict";e.i(43476),e.i(37902);var t=e.i(71645),s=e.i(57951),a=e.i(18566);function i(e,n="/login"){let{user:l,isLoading:r,isAuthenticated:d,hasAccess:o}=(0,s.useAuth)(),u=(0,a.useRouter)(),[c,m]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{if(!r){if(!d)return void u.replace(n);if(!o(e)){if(l&&l.accessPages&&l.accessPages.length>0){let e=l.accessPages[0];u.replace({home:"/",sample1:"/sample1",sample2:"/sample2",users:"/users",products:"/products/add",suppliers:"/suppliers/add",shops:"/shops/add",grn:"/grn/add",discounts:"/discounts/add",settings:"/settings",reports:"/reports",debug:"/debug-access"}[e]||"/")}else u.replace("/login");return}m(!0)}},[r,d,o,e,l,u,n]),{isAuthorized:c&&d,isLoading:r,user:l,hasAccess:o}}e.s(["usePageProtection",()=>i])},89088,e=>{"use strict";e.s(["handleNumberInputWheel",0,e=>{e.target.blur(),e.preventDefault()}])},72221,e=>{e.v({accessDenied:"add-module__VkmDya__accessDenied",actions:"add-module__VkmDya__actions",activate:"add-module__VkmDya__activate",active:"add-module__VkmDya__active",balanceAmount:"add-module__VkmDya__balanceAmount",clearButton:"add-module__VkmDya__clearButton",contact:"add-module__VkmDya__contact",container:"add-module__VkmDya__container",creditLimit:"add-module__VkmDya__creditLimit",deactivate:"add-module__VkmDya__deactivate",deleteButton:"add-module__VkmDya__deleteButton",editButton:"add-module__VkmDya__editButton",ellipsis:"add-module__VkmDya__ellipsis",error:"add-module__VkmDya__error",field:"add-module__VkmDya__field",form:"add-module__VkmDya__form",header:"add-module__VkmDya__header",inactive:"add-module__VkmDya__inactive",input:"add-module__VkmDya__input",label:"add-module__VkmDya__label",loadButton:"add-module__VkmDya__loadButton",loading:"add-module__VkmDya__loading",noShops:"add-module__VkmDya__noShops",noShopsIcon:"add-module__VkmDya__noShopsIcon",ownerName:"add-module__VkmDya__ownerName",pageBtn:"add-module__VkmDya__pageBtn",pageNumbers:"add-module__VkmDya__pageNumbers",pagination:"add-module__VkmDya__pagination",paginationInfo:"add-module__VkmDya__paginationInfo",row:"add-module__VkmDya__row",searchButton:"add-module__VkmDya__searchButton",searchForm:"add-module__VkmDya__searchForm",searchInput:"add-module__VkmDya__searchInput",searchSection:"add-module__VkmDya__searchSection",shopName:"add-module__VkmDya__shopName",shopsContent:"add-module__VkmDya__shopsContent",shopsHeader:"add-module__VkmDya__shopsHeader",shopsList:"add-module__VkmDya__shopsList",shopsTable:"add-module__VkmDya__shopsTable",slideIn:"add-module__VkmDya__slideIn",status:"add-module__VkmDya__status",submitButton:"add-module__VkmDya__submitButton",submitSection:"add-module__VkmDya__submitSection",subtitle:"add-module__VkmDya__subtitle",success:"add-module__VkmDya__success",tableBody:"add-module__VkmDya__tableBody",tableHeader:"add-module__VkmDya__tableHeader",tableRow:"add-module__VkmDya__tableRow",textarea:"add-module__VkmDya__textarea",title:"add-module__VkmDya__title",toggleButton:"add-module__VkmDya__toggleButton",user:"add-module__VkmDya__user"})},83476,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(11870),i=e.i(75144),n=e.i(57951),l=e.i(89088),r=e.i(72221);e.s(["default",0,()=>{let{isAuthorized:e,isLoading:d}=(0,a.usePageProtection)("shops"),{isDarkMode:o}=(0,i.useTheme)(),{user:u}=(0,n.useAuth)(),[c,m]=(0,s.useState)({shopName:"",ownerName:"",address:"",contactNumber:"",email:"",businessRegisterNo:"",image:"",creditLimit:"",balanceAmount:"0",isActive:!1}),[h,p]=(0,s.useState)(!1),[_,f]=(0,s.useState)(""),[v,y]=(0,s.useState)(""),[g,b]=(0,s.useState)(!1),[N,S]=(0,s.useState)(5e4),[x,j]=(0,s.useState)(null),[w,k]=(0,s.useState)([]),[C,A]=(0,s.useState)(!1),[R,D]=(0,s.useState)(""),[V,F]=(0,s.useState)(1),[L,T]=(0,s.useState)({currentPage:1,totalPages:1,totalCount:0,hasNext:!1,hasPrev:!1}),E=()=>({"Content-Type":"application/json","x-user-data":JSON.stringify(u||{})});(0,s.useEffect)(()=>{if(!c.creditLimit&&e&&u){let e=!0;return(async()=>{try{let t=await fetch("/api/softwareSettings",{headers:{"Content-Type":"application/json","x-user-data":JSON.stringify(u||{})}}),s=await t.json();if(e&&s.success&&s.settings&&s.settings.defaultCreditLimit){let e=s.settings.defaultCreditLimit;S(e),m(t=>({...t,creditLimit:e.toString()}))}else S(5e4),m(e=>({...e,creditLimit:"50000"}))}catch(t){e&&(S(5e4),m(e=>({...e,creditLimit:"50000"})))}})(),()=>{e=!1}}},[c.creditLimit,e,u]);let B=(0,s.useCallback)(async(e=1,t="",s=!1)=>{p(!0),y("");try{let a=new URLSearchParams({page:e.toString(),limit:"5",search:t.trim()}),i=await fetch(`/api/shops?${a}`,{headers:E()}),n=await i.json();n.success?(k(n.shops),T(n.pagination),F(e),A(!0),0===n.shops.length&&t&&y(`No shops found matching "${t}"`)):(y(n.error||"Failed to load shops"),s&&(k([]),A(!1)))}catch(e){y("An error occurred while loading shops"),s&&(k([]),A(!1))}finally{p(!1)}},[]);(0,s.useEffect)(()=>{if(C){let e=setTimeout(()=>{B(1,R.trim(),!0)},300);return()=>clearTimeout(e)}},[R,B,C]);let P=async e=>{if(e.preventDefault(),!c.shopName||!c.ownerName||!c.address||!c.contactNumber)return void y("Please fill in all required fields");if(c.email.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.email.trim()))return void y("Please enter a valid email address");let t=parseFloat(c.creditLimit);if(isNaN(t)||t<0)return void y("Credit limit must be a valid positive number");if(isNaN(parseFloat(c.balanceAmount)))return void y("Balance amount must be a valid number");p(!0),y(""),f("");try{let e=g?"PUT":"POST",t={...g&&{id:x},shopName:c.shopName.trim(),ownerName:c.ownerName.trim(),address:c.address.trim(),contactNumber:c.contactNumber.trim(),email:c.email.trim()||null,businessRegisterNo:c.businessRegisterNo.trim()||null,image:c.image.trim()||null,creditLimit:parseFloat(c.creditLimit),balanceAmount:parseFloat(c.balanceAmount),isActive:c.isActive},s=await fetch("/api/shops",{method:e,headers:E(),body:JSON.stringify(t)}),a=await s.json();a.success?(f(a.message),m({shopName:"",ownerName:"",address:"",contactNumber:"",email:"",businessRegisterNo:"",image:"",creditLimit:N.toString(),balanceAmount:"0",isActive:!1}),g&&(b(!1),j(null)),C&&B(V,R),setTimeout(()=>f(""),3e3)):y(a.error||"Operation failed")}catch(e){y("An error occurred while processing your request")}finally{p(!1)}},z=async(e,t,s)=>{if(window.confirm(`Are you sure you want to ${s?"deactivate":"activate"} the shop "${t}"?`)){p(!0);try{let t=await fetch(`/api/shops?id=${e}&action=toggle`,{method:"DELETE"}),s=await t.json();s.success?(f(s.message),C&&B(V,R),setTimeout(()=>f(""),3e3)):y(s.error||"Failed to update shop status")}catch(e){y("An error occurred while updating shop status")}finally{p(!1)}}},I=async(e,t)=>{if(window.confirm(`âš ï¸ PERMANENT DELETE WARNING!

Are you sure you want to PERMANENTLY delete "${t}"?

This action CANNOT be undone and will remove the shop from the database completely.`)&&window.confirm(`Final confirmation: Permanently delete "${t}"?

Click OK to proceed with permanent deletion.`)){p(!0);try{let s=await fetch(`/api/shops?id=${e}&action=permanent`,{method:"DELETE"}),a=await s.json();a.success?(f(`Shop "${t}" permanently deleted successfully!`),C&&B(V,R),setTimeout(()=>f(""),3e3)):y(a.error||"Failed to permanently delete shop")}catch(e){y("An error occurred while permanently deleting shop")}finally{p(!1)}}},O=()=>{D(""),B(1,"",!0)},$=e=>{e>=1&&e<=L.totalPages&&!h&&B(e,R,!1)};return d?(0,t.jsx)("div",{className:r.default.loading,children:"Checking permissions..."}):e?(0,t.jsxs)("div",{className:`${r.default.container} ${o?"dark":"light"}`,children:[(0,t.jsxs)("div",{className:r.default.header,children:[(0,t.jsx)("h1",{className:r.default.title,children:g?"Edit Shop":"Shop Management"}),g&&(0,t.jsx)("button",{type:"button",onClick:()=>{m({shopName:"",ownerName:"",address:"",contactNumber:"",email:"",businessRegisterNo:"",image:"",creditLimit:N.toString(),balanceAmount:"0",isActive:!1}),b(!1),j(null),y(""),f("")},className:r.default.clearButton,children:"Cancel Edit"})]}),(0,t.jsxs)("form",{onSubmit:P,className:r.default.form,children:[(0,t.jsxs)("div",{className:r.default.row,children:[(0,t.jsxs)("div",{className:r.default.field,children:[(0,t.jsx)("label",{className:r.default.label,children:"Shop Name: *"}),(0,t.jsx)("input",{type:"text",value:c.shopName,onChange:e=>m(t=>({...t,shopName:e.target.value})),className:r.default.input,placeholder:"Enter shop name",disabled:h,required:!0})]}),(0,t.jsxs)("div",{className:r.default.field,children:[(0,t.jsx)("label",{className:r.default.label,children:"Owner Name: *"}),(0,t.jsx)("input",{type:"text",value:c.ownerName,onChange:e=>m(t=>({...t,ownerName:e.target.value})),className:r.default.input,placeholder:"Enter owner name",disabled:h,required:!0})]})]}),(0,t.jsx)("div",{className:r.default.row,children:(0,t.jsxs)("div",{className:r.default.field,children:[(0,t.jsx)("label",{className:r.default.label,children:"Address: *"}),(0,t.jsx)("textarea",{value:c.address,onChange:e=>m(t=>({...t,address:e.target.value})),className:`${r.default.input} ${r.default.textarea}`,placeholder:"Enter complete address",disabled:h,rows:3,required:!0})]})}),(0,t.jsxs)("div",{className:r.default.row,children:[(0,t.jsxs)("div",{className:r.default.field,children:[(0,t.jsx)("label",{className:r.default.label,children:"Contact Number: *"}),(0,t.jsx)("input",{type:"tel",value:c.contactNumber,onChange:e=>m(t=>({...t,contactNumber:e.target.value})),className:r.default.input,placeholder:"Enter contact number",disabled:h,required:!0})]}),(0,t.jsxs)("div",{className:r.default.field,children:[(0,t.jsx)("label",{className:r.default.label,children:"Email:"}),(0,t.jsx)("input",{type:"email",value:c.email,onChange:e=>m(t=>({...t,email:e.target.value})),className:r.default.input,placeholder:"Enter email address",disabled:h})]})]}),(0,t.jsxs)("div",{className:r.default.row,children:[(0,t.jsxs)("div",{className:r.default.field,children:[(0,t.jsx)("label",{className:r.default.label,children:"Business Register No:"}),(0,t.jsx)("input",{type:"text",value:c.businessRegisterNo,onChange:e=>m(t=>({...t,businessRegisterNo:e.target.value})),className:r.default.input,placeholder:"Enter business register number",disabled:h})]}),(0,t.jsxs)("div",{className:r.default.field,children:[(0,t.jsx)("label",{className:r.default.label,children:"Credit Limit:"}),(0,t.jsx)("input",{type:"number",step:"0.01",min:"0",value:c.creditLimit,onChange:e=>m(t=>({...t,creditLimit:e.target.value})),onWheel:l.handleNumberInputWheel,className:r.default.input,placeholder:"Enter credit limit",disabled:h})]}),(0,t.jsxs)("div",{className:r.default.field,children:[(0,t.jsx)("label",{className:r.default.label,children:"Balance Amount:"}),(0,t.jsx)("input",{type:"number",step:"0.01",value:c.balanceAmount,onChange:e=>m(t=>({...t,balanceAmount:e.target.value})),onWheel:l.handleNumberInputWheel,className:r.default.input,placeholder:"Enter balance amount",disabled:h,readOnly:!0})]})]}),(0,t.jsxs)("div",{className:r.default.row,children:[(0,t.jsxs)("div",{className:r.default.field,children:[(0,t.jsx)("label",{className:r.default.label,children:"Image URL:"}),(0,t.jsx)("input",{type:"url",value:c.image,onChange:e=>m(t=>({...t,image:e.target.value})),className:r.default.input,placeholder:"Enter image URL",disabled:h})]}),(0,t.jsxs)("div",{className:r.default.field,children:[(0,t.jsx)("label",{className:r.default.label,children:"Status:"}),(0,t.jsxs)("select",{value:c.isActive?"active":"inactive",onChange:e=>m(t=>({...t,isActive:"active"===e.target.value})),className:r.default.input,disabled:h,children:[(0,t.jsx)("option",{value:"inactive",children:"Inactive"}),(0,t.jsx)("option",{value:"active",children:"Active"})]})]})]}),v&&(0,t.jsx)("div",{className:r.default.error,children:v}),_&&(0,t.jsx)("div",{className:r.default.success,children:_}),(0,t.jsx)("div",{className:r.default.submitSection,children:(0,t.jsx)("button",{type:"submit",className:r.default.submitButton,disabled:h,children:h?"Processing...":g?"Update Shop":"Create Shop"})})]}),(0,t.jsxs)("div",{className:r.default.shopsList,children:[(0,t.jsxs)("div",{className:r.default.shopsHeader,children:[(0,t.jsx)("h2",{className:r.default.subtitle,children:"Existing Shops"}),(0,t.jsxs)("div",{className:r.default.searchSection,children:[(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault()},className:r.default.searchForm,children:[(0,t.jsx)("input",{type:"text",value:R,onChange:e=>D(e.target.value),placeholder:"Search by shop name, owner, contact...",className:r.default.searchInput}),(0,t.jsx)("button",{type:"submit",className:r.default.searchButton,disabled:h,children:"Search"})]}),(0,t.jsx)("button",{onClick:O,className:r.default.loadButton,disabled:h,children:h?"Loading...":"Load All"})]})]}),(0,t.jsxs)("div",{className:r.default.shopsContent,children:[C?0===w.length?(0,t.jsxs)("div",{className:r.default.noShops,children:[(0,t.jsx)("div",{className:r.default.noShopsIcon,children:"ðŸ”"}),(0,t.jsx)("h3",{children:"No Shops Found"}),(0,t.jsx)("p",{children:R?`No shops match "${R}". Try a different search term.`:"No shops have been registered yet. Create your first shop using the form above."}),R&&(0,t.jsx)("button",{onClick:O,className:r.default.loadButton,style:{marginTop:"1rem"},children:"View All Shops"})]}):(0,t.jsxs)("div",{className:r.default.shopsTable,children:[(0,t.jsxs)("div",{className:r.default.tableHeader,children:[(0,t.jsx)("div",{children:"Shop Name"}),(0,t.jsx)("div",{children:"Owner"}),(0,t.jsx)("div",{children:"Contact"}),(0,t.jsx)("div",{children:"Credit Limit"}),(0,t.jsx)("div",{children:"Balance Amount"}),(0,t.jsx)("div",{children:"Status"}),(0,t.jsx)("div",{children:"Created By"}),(0,t.jsx)("div",{children:"Actions"})]}),(0,t.jsx)("div",{className:r.default.tableBody,children:w.map(e=>(0,t.jsxs)("div",{className:r.default.tableRow,children:[(0,t.jsx)("div",{className:r.default.shopName,children:e.shopName}),(0,t.jsx)("div",{className:r.default.ownerName,children:e.ownerName}),(0,t.jsx)("div",{className:r.default.contact,children:e.contactNumber}),(0,t.jsxs)("div",{className:r.default.creditLimit,children:["LKR ",Number(e.creditLimit).toLocaleString()]}),(0,t.jsxs)("div",{className:r.default.balanceAmount,children:["LKR ",Number(e.balanceAmount).toLocaleString()]}),(0,t.jsx)("div",{children:(0,t.jsx)("span",{className:`${r.default.status} ${e.isActive?r.default.active:r.default.inactive}`,children:e.isActive?"Active":"Inactive"})}),(0,t.jsx)("div",{className:r.default.user,children:e.user}),(0,t.jsxs)("div",{className:r.default.actions,children:[(0,t.jsx)("button",{onClick:()=>{m({shopName:e.shopName,ownerName:e.ownerName,address:e.address,contactNumber:e.contactNumber,email:e.email||"",businessRegisterNo:e.businessRegisterNo||"",image:e.image||"",creditLimit:e.creditLimit.toString(),balanceAmount:e.balanceAmount.toString(),isActive:e.isActive}),b(!0),j(e.id),y(""),f(""),window.scrollTo({top:0,behavior:"smooth"})},className:r.default.editButton,disabled:h,children:"Edit"}),(0,t.jsx)("button",{onClick:()=>z(e.id,e.shopName,e.isActive),className:`${r.default.toggleButton} ${e.isActive?r.default.deactivate:r.default.activate}`,disabled:h,children:e.isActive?"Deactivate":"Activate"}),(0,t.jsx)("button",{onClick:()=>I(e.id,e.shopName),className:r.default.deleteButton,disabled:h,children:"Delete"})]})]},e.id))})]}):(0,t.jsxs)("div",{className:r.default.noShops,children:[(0,t.jsx)("div",{className:r.default.noShopsIcon,children:"ðŸª"}),(0,t.jsx)("h3",{children:"Shop Directory"}),(0,t.jsxs)("p",{children:["Click ",(0,t.jsx)("strong",{children:'"Load All"'})," to view all registered shops"]}),(0,t.jsx)("p",{children:"Or use the search box to find specific shops"})]}),w.length>0&&(0,t.jsx)("div",{className:r.default.pagination,children:L.totalPages>1&&(0,t.jsxs)("div",{className:r.default.pageNumbers,children:[(0,t.jsx)("button",{onClick:()=>$(V-1),disabled:!L.hasPrev||h,className:r.default.pageBtn,children:"â† Previous"}),(()=>{let e=[],s=L.totalPages;if(s<=7)for(let t=1;t<=s;t++)e.push(t);else{e.push(1),V>3&&e.push("...");let t=Math.max(2,V-1),a=Math.min(s-1,V+1);for(let s=t;s<=a;s++)e.includes(s)||e.push(s);V<s-2&&e.push("..."),e.includes(s)||e.push(s)}return e.map((e,s)=>"..."===e?(0,t.jsx)("span",{className:r.default.ellipsis,children:"..."},`ellipsis-${s}`):(0,t.jsx)("button",{onClick:()=>$(e),className:`${r.default.pageBtn} ${e===V?r.default.active:""}`,disabled:h,children:e},e))})(),(0,t.jsx)("button",{onClick:()=>$(V+1),disabled:!L.hasNext||h,className:r.default.pageBtn,children:"Next â†’"})]})})]})]})]}):(0,t.jsx)("div",{className:r.default.accessDenied,children:"Access denied to shop management"})}])}]);