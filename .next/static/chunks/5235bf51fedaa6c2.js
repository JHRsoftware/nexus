(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59440,e=>{e.v({active:"sales-rep-module__VGKtKa__active",buttonGroup:"sales-rep-module__VGKtKa__buttonGroup",cancelBtn:"sales-rep-module__VGKtKa__cancelBtn",contactNumber:"sales-rep-module__VGKtKa__contactNumber",contactRow:"sales-rep-module__VGKtKa__contactRow",container:"sales-rep-module__VGKtKa__container",createdAt:"sales-rep-module__VGKtKa__createdAt",createdBy:"sales-rep-module__VGKtKa__createdBy",deactive:"sales-rep-module__VGKtKa__deactive",deleteBtn:"sales-rep-module__VGKtKa__deleteBtn",editBtn:"sales-rep-module__VGKtKa__editBtn",editButtons:"sales-rep-module__VGKtKa__editButtons",editFormRow:"sales-rep-module__VGKtKa__editFormRow",editInput:"sales-rep-module__VGKtKa__editInput",editMode:"sales-rep-module__VGKtKa__editMode",emptyState:"sales-rep-module__VGKtKa__emptyState",error:"sales-rep-module__VGKtKa__error",form:"sales-rep-module__VGKtKa__form",formRow:"sales-rep-module__VGKtKa__formRow",metaRow:"sales-rep-module__VGKtKa__metaRow",nameRow:"sales-rep-module__VGKtKa__nameRow","primary-action":"sales-rep-module__VGKtKa__primary-action",remark:"sales-rep-module__VGKtKa__remark",remarkRow:"sales-rep-module__VGKtKa__remarkRow",salesRepActions:"sales-rep-module__VGKtKa__salesRepActions",salesRepInfo:"sales-rep-module__VGKtKa__salesRepInfo",salesRepItem:"sales-rep-module__VGKtKa__salesRepItem",salesRepItems:"sales-rep-module__VGKtKa__salesRepItems",salesRepName:"sales-rep-module__VGKtKa__salesRepName",salesRepsList:"sales-rep-module__VGKtKa__salesRepsList",saveBtn:"sales-rep-module__VGKtKa__saveBtn",secondary:"sales-rep-module__VGKtKa__secondary",status:"sales-rep-module__VGKtKa__status",subtitle:"sales-rep-module__VGKtKa__subtitle",success:"sales-rep-module__VGKtKa__success",textarea:"sales-rep-module__VGKtKa__textarea",title:"sales-rep-module__VGKtKa__title",viewMode:"sales-rep-module__VGKtKa__viewMode"})},95338,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(18566),l=e.i(59440);e.s(["default",0,()=>{let e=(0,s.useRouter)(),[r,d]=(0,t.useState)({name:"",contactNumber:"",remark:"",status:"active"}),[n,c]=(0,t.useState)(!1),[o,u]=(0,t.useState)(""),[i,m]=(0,t.useState)([]),[_,p]=(0,t.useState)(!1),[h,K]=(0,t.useState)(null),[f,N]=(0,t.useState)(r);(0,t.useEffect)(()=>{(()=>{let a=localStorage.getItem("currentUser")||sessionStorage.getItem("currentUser");if(!a)return e.push("/login");try{JSON.parse(a)}catch(a){e.push("/login")}})()},[e]);let v=()=>{let e=localStorage.getItem("currentUser")||sessionStorage.getItem("currentUser"),a={"Content-Type":"application/json"};return e&&(a["x-user-data"]=e),a},x=(e,a)=>{d(t=>({...t,[e]:a}))},j=(e,a)=>{N(t=>({...t,[e]:a}))},R=e=>e.name.trim()?e.contactNumber.trim()?/^[\+]?[0-9\-\(\)\s]+$/.test(e.contactNumber)?"":"Please enter a valid contact number":"Contact number is required":"Sales Rep name is required",b=async e=>{e.preventDefault(),u(""),c(!1);let a=R(r);if(a)return void u(a);try{let e=await fetch("/api/sales-rep",{method:"POST",headers:v(),body:JSON.stringify(r)}),a=await e.json();e.ok&&a.success?(c(!0),d({name:"",contactNumber:"",remark:"",status:"active"}),y()):u(a.error||"Failed to add sales rep")}catch(e){u("Network error. Please try again.")}},y=async()=>{p(!0);try{let e=await fetch("/api/sales-rep",{headers:v()}),a=await e.json();a.success?m(a.salesReps):u("Failed to load sales reps")}catch(e){u("Network error. Please try again.")}finally{p(!1)}},G=()=>{K(null),N(r)},g=async e=>{let a=R(f);if(a)return void u(a);try{let a=await fetch("/api/sales-rep",{method:"PUT",headers:v(),body:JSON.stringify({id:e,...f})}),t=await a.json();a.ok&&t.success?(m(i.map(a=>a.id===e?{...a,...f}:a)),G(),c(!0),u("")):u(t.error||"Failed to update sales rep")}catch(e){u("Network error. Please try again.")}},w=async(e,a)=>{if(confirm(`Are you sure you want to delete sales rep "${a}"?`))try{let a=await fetch(`/api/sales-rep?id=${e}`,{method:"DELETE",headers:v()}),t=await a.json();a.ok&&t.success?(m(i.filter(a=>a.id!==e)),c(!0),u("")):u(t.error||"Failed to delete sales rep")}catch(e){u("Network error. Please try again.")}};return(0,a.jsxs)("div",{className:l.default.container,children:[(0,a.jsx)("h1",{className:l.default.title,children:"Sales Representative Management"}),(0,a.jsxs)("form",{className:l.default.form,onSubmit:b,children:[(0,a.jsxs)("div",{className:l.default.formRow,children:[(0,a.jsx)("input",{type:"text",className:"themed-input",placeholder:"Sales Rep Name *",value:r.name,onChange:e=>x("name",e.target.value),required:!0}),(0,a.jsx)("input",{type:"tel",className:"themed-input",placeholder:"Contact Number *",value:r.contactNumber,onChange:e=>x("contactNumber",e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:l.default.formRow,children:[(0,a.jsx)("textarea",{className:`themed-input ${l.default.textarea}`,placeholder:"Remark (Optional)",value:r.remark,onChange:e=>x("remark",e.target.value),rows:3}),(0,a.jsxs)("select",{className:"themed-input",value:r.status,onChange:e=>x("status",e.target.value),children:[(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"deactive",children:"Deactive"})]})]}),(0,a.jsxs)("div",{className:l.default.buttonGroup,children:[(0,a.jsx)("button",{type:"submit",className:"themed-button primary-action",children:"Add Sales Rep"}),(0,a.jsx)("button",{type:"button",className:"themed-button secondary",onClick:y,disabled:_,children:_?"Loading...":"Load Sales Reps"})]})]}),o&&(0,a.jsx)("p",{className:l.default.error,children:o}),n&&(0,a.jsx)("p",{className:l.default.success,children:"Operation completed successfully!"}),i.length>0&&(0,a.jsxs)("div",{className:l.default.salesRepsList,children:[(0,a.jsxs)("h2",{className:l.default.subtitle,children:["Sales Representatives (",i.length,")"]}),(0,a.jsx)("div",{className:l.default.salesRepItems,children:i.map(e=>(0,a.jsx)("div",{className:l.default.salesRepItem,children:h===e.id?(0,a.jsxs)("div",{className:l.default.editMode,children:[(0,a.jsxs)("div",{className:l.default.editFormRow,children:[(0,a.jsx)("input",{type:"text",className:l.default.editInput,placeholder:"Sales Rep Name *",value:f.name,onChange:e=>j("name",e.target.value)}),(0,a.jsx)("input",{type:"tel",className:l.default.editInput,placeholder:"Contact Number *",value:f.contactNumber,onChange:e=>j("contactNumber",e.target.value)})]}),(0,a.jsxs)("div",{className:l.default.editFormRow,children:[(0,a.jsx)("textarea",{className:`${l.default.editInput} ${l.default.textarea}`,placeholder:"Remark",value:f.remark,onChange:e=>j("remark",e.target.value),rows:2}),(0,a.jsxs)("select",{className:l.default.editInput,value:f.status,onChange:e=>j("status",e.target.value),children:[(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"deactive",children:"Deactive"})]})]}),(0,a.jsxs)("div",{className:l.default.editButtons,children:[(0,a.jsx)("button",{className:l.default.saveBtn,onClick:()=>g(e.id),children:"âœ“ Save"}),(0,a.jsx)("button",{className:l.default.cancelBtn,onClick:G,children:"âœ• Cancel"})]})]}):(0,a.jsxs)("div",{className:l.default.viewMode,children:[(0,a.jsxs)("div",{className:l.default.salesRepInfo,children:[(0,a.jsxs)("div",{className:l.default.nameRow,children:[(0,a.jsx)("span",{className:l.default.salesRepName,children:e.name}),(0,a.jsx)("span",{className:`${l.default.status} ${l.default[e.status]}`,children:e.status})]}),(0,a.jsx)("div",{className:l.default.contactRow,children:(0,a.jsxs)("span",{className:l.default.contactNumber,children:["ğŸ“ ",e.contactNumber]})}),e.remark&&(0,a.jsx)("div",{className:l.default.remarkRow,children:(0,a.jsxs)("span",{className:l.default.remark,children:["ğŸ’¬ ",e.remark]})}),(0,a.jsxs)("div",{className:l.default.metaRow,children:[(0,a.jsxs)("span",{className:l.default.createdBy,children:["Created by: ",e.user]}),(0,a.jsx)("span",{className:l.default.createdAt,children:new Date(e.createdAt).toLocaleDateString()})]})]}),(0,a.jsxs)("div",{className:l.default.salesRepActions,children:[(0,a.jsx)("button",{className:l.default.editBtn,onClick:()=>{K(e.id),N({name:e.name,contactNumber:e.contactNumber,remark:e.remark,status:e.status})},children:"âœï¸ Edit"}),(0,a.jsx)("button",{className:l.default.deleteBtn,onClick:()=>w(e.id,e.name),children:"ğŸ—‘ï¸ Delete"})]})]})},e.id))})]}),0===i.length&&!_&&(0,a.jsx)("div",{className:l.default.emptyState,children:(0,a.jsx)("p",{children:"No sales representatives found. Add your first sales rep above!"})})]})}])}]);