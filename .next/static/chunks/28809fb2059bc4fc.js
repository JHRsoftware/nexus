(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,21604,e=>{e.v({backgroundMove:"login-module__WEZH7G__backgroundMove",backgroundPattern:"login-module__WEZH7G__backgroundPattern",cardEntrance:"login-module__WEZH7G__cardEntrance",checkbox:"login-module__WEZH7G__checkbox",checkboxLabel:"login-module__WEZH7G__checkboxLabel",checkboxText:"login-module__WEZH7G__checkboxText",contactInfo:"login-module__WEZH7G__contactInfo",contactText:"login-module__WEZH7G__contactText",demoButton:"login-module__WEZH7G__demoButton",demoButtons:"login-module__WEZH7G__demoButtons",demoDesc:"login-module__WEZH7G__demoDesc",demoIcon:"login-module__WEZH7G__demoIcon",demoSection:"login-module__WEZH7G__demoSection",demoTitle:"login-module__WEZH7G__demoTitle",divider:"login-module__WEZH7G__divider",dividerText:"login-module__WEZH7G__dividerText",errorBanner:"login-module__WEZH7G__errorBanner",errorIcon:"login-module__WEZH7G__errorIcon",errorText:"login-module__WEZH7G__errorText",floatUpDown:"login-module__WEZH7G__floatUpDown",footerText:"login-module__WEZH7G__footerText",forgotPassword:"login-module__WEZH7G__forgotPassword",formGroup:"login-module__WEZH7G__formGroup",formInput:"login-module__WEZH7G__formInput",formLabel:"login-module__WEZH7G__formLabel",formOptions:"login-module__WEZH7G__formOptions",inputError:"login-module__WEZH7G__inputError",inputIcon:"login-module__WEZH7G__inputIcon",inputWrapper:"login-module__WEZH7G__inputWrapper",loadingSpinner:"login-module__WEZH7G__loadingSpinner",loginCard:"login-module__WEZH7G__loginCard",loginContainer:"login-module__WEZH7G__loginContainer",loginFooter:"login-module__WEZH7G__loginFooter",loginForm:"login-module__WEZH7G__loginForm",loginHeader:"login-module__WEZH7G__loginHeader",logo:"login-module__WEZH7G__logo",logoCircle:"login-module__WEZH7G__logoCircle",logoContainer:"login-module__WEZH7G__logoContainer",logoEntrance:"login-module__WEZH7G__logoEntrance",logoIcon:"login-module__WEZH7G__logoIcon",logoInitial:"login-module__WEZH7G__logoInitial",logoSubtext:"login-module__WEZH7G__logoSubtext",logoText:"login-module__WEZH7G__logoText",logoTextContainer:"login-module__WEZH7G__logoTextContainer",signupLink:"login-module__WEZH7G__signupLink",slideInDown:"login-module__WEZH7G__slideInDown",spin:"login-module__WEZH7G__spin",submitButton:"login-module__WEZH7G__submitButton",submitIcon:"login-module__WEZH7G__submitIcon",subtitle:"login-module__WEZH7G__subtitle",togglePassword:"login-module__WEZH7G__togglePassword"})},94542,e=>{"use strict";var o=e.i(43476),s=e.i(71645),a=e.i(18566),l=e.i(21604);e.s(["default",0,()=>{let e=(0,a.useRouter)(),[n,r]=(0,s.useState)({username:"",password:""}),[t,d]=(0,s.useState)({}),[i,u]=(0,s.useState)(!1),[c,m]=(0,s.useState)(!1),[_,g]=(0,s.useState)(!1),[p,h]=(0,s.useState)(!1);(0,s.useEffect)(()=>{try{let o=localStorage.getItem("currentUser")||sessionStorage.getItem("currentUser");if(o){let s=JSON.parse(o);s&&s.username&&s.accessPages&&setTimeout(()=>{s.accessPages.includes("home")?e.push("/"):(localStorage.removeItem("currentUser"),sessionStorage.removeItem("currentUser"),window.dispatchEvent(new CustomEvent("authChange")))},50)}}catch(e){localStorage.removeItem("currentUser"),sessionStorage.removeItem("currentUser")}},[e]);let f=e=>{let{name:o,value:s}=e.target;r(e=>({...e,[o]:s})),t[o]&&d(e=>({...e,[o]:""}))},x=async o=>{let s;if(o.preventDefault(),s={},n.username.trim()?n.username.length<3&&(s.username="Username must be at least 3 characters"):s.username="Username is required",n.password?n.password.length<6&&(s.password="Password must be at least 6 characters"):s.password="Password is required",d(s),0===Object.keys(s).length){u(!0),d({});try{let o=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),s=await o.json();if(s.success&&s.user){let o={...s.user,loginTime:new Date().toISOString()};_?(localStorage.setItem("currentUser",JSON.stringify(o)),localStorage.setItem("rememberLogin","true")):sessionStorage.setItem("currentUser",JSON.stringify(o)),window.dispatchEvent(new CustomEvent("authChange")),setTimeout(()=>{s.user&&(s.user.accessPages.includes("home")?e.push("/"):(localStorage.removeItem("currentUser"),sessionStorage.removeItem("currentUser"),window.dispatchEvent(new CustomEvent("authChange")),d({general:"Access denied. You do not have permission to access the home page."})))},50)}else d({general:s.error||"Login failed. Please try again."})}catch(e){d({general:"Network error. Please check your connection and try again."})}finally{u(!1)}}},b=e=>{r({admin:{username:"username",password:"password"},user:{username:"username",password:"password"}}[e])};return(0,o.jsxs)("div",{className:l.default.loginContainer,children:[(0,o.jsxs)("div",{className:l.default.loginCard,children:[(0,o.jsxs)("div",{className:l.default.loginHeader,children:[(0,o.jsx)("div",{className:l.default.logo,children:(0,o.jsxs)("div",{className:l.default.logoContainer,children:[(0,o.jsx)("div",{className:l.default.logoIcon,children:(0,o.jsx)("div",{className:l.default.logoCircle,children:(0,o.jsx)("span",{className:l.default.logoInitial,children:"H"})})}),(0,o.jsxs)("div",{className:l.default.logoTextContainer,children:[(0,o.jsx)("h1",{className:l.default.logoText,children:"Harshana"}),(0,o.jsx)("span",{className:l.default.logoSubtext,children:"System"})]})]})}),(0,o.jsx)("p",{className:l.default.subtitle,children:"Sign in to your account"})]}),t.general&&(0,o.jsxs)("div",{className:l.default.errorBanner,role:"alert",children:[(0,o.jsx)("span",{className:l.default.errorIcon,children:"âš ï¸"}),(0,o.jsx)("span",{children:t.general})]}),(0,o.jsxs)("form",{onSubmit:x,className:l.default.loginForm,noValidate:!0,children:[(0,o.jsxs)("div",{className:l.default.formGroup,children:[(0,o.jsx)("label",{htmlFor:"username",className:l.default.formLabel,children:"Username"}),(0,o.jsxs)("div",{className:l.default.inputWrapper,children:[(0,o.jsx)("span",{className:l.default.inputIcon,children:"ðŸ‘¤"}),(0,o.jsx)("input",{id:"username",name:"username",type:"text",value:n.username,onChange:f,className:`${l.default.formInput} ${t.username?l.default.inputError:""}`,placeholder:"Enter your username",disabled:i,autoComplete:"username","aria-describedby":t.username?"username-error":void 0,"aria-invalid":t.username?"true":"false"})]}),t.username&&(0,o.jsx)("span",{id:"username-error",className:l.default.errorText,role:"alert",children:t.username})]}),(0,o.jsxs)("div",{className:l.default.formGroup,children:[(0,o.jsx)("label",{htmlFor:"password",className:l.default.formLabel,children:"Password"}),(0,o.jsxs)("div",{className:l.default.inputWrapper,children:[(0,o.jsx)("span",{className:l.default.inputIcon,children:"ðŸ”’"}),(0,o.jsx)("input",{id:"password",name:"password",type:c?"text":"password",value:n.password,onChange:f,className:`${l.default.formInput} ${t.password?l.default.inputError:""}`,placeholder:"Enter your password",disabled:i,autoComplete:"current-password","aria-describedby":t.password?"password-error":void 0,"aria-invalid":t.password?"true":"false"}),(0,o.jsx)("button",{type:"button",className:l.default.togglePassword,onClick:()=>m(!c),disabled:i,"aria-label":c?"Hide password":"Show password",children:c?"ðŸ‘ï¸â€ðŸ—¨ï¸":"ðŸ‘ï¸"})]}),t.password&&(0,o.jsx)("span",{id:"password-error",className:l.default.errorText,role:"alert",children:t.password})]}),(0,o.jsxs)("div",{className:l.default.formOptions,children:[(0,o.jsxs)("label",{className:l.default.checkboxLabel,children:[(0,o.jsx)("input",{type:"checkbox",checked:_,onChange:e=>g(e.target.checked),disabled:i,className:l.default.checkbox}),(0,o.jsx)("span",{className:l.default.checkboxText,children:"Remember me"})]}),(0,o.jsx)("button",{type:"button",className:l.default.forgotPassword,disabled:i,children:"Forgot password?"})]}),(0,o.jsx)("button",{type:"submit",className:l.default.submitButton,disabled:i,children:i?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:l.default.loadingSpinner,children:"â³"}),(0,o.jsx)("span",{children:"Signing In..."})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{children:"Sign In"}),(0,o.jsx)("span",{className:l.default.submitIcon,children:"â†’"})]})})]}),(0,o.jsxs)("div",{className:l.default.demoSection,children:[(0,o.jsx)("div",{className:l.default.divider,children:(0,o.jsx)("span",{className:l.default.dividerText,children:"Try Demo Accounts"})}),(0,o.jsxs)("div",{className:l.default.demoButtons,children:[(0,o.jsxs)("button",{type:"button",className:l.default.demoButton,onClick:()=>b("admin"),disabled:i,children:[(0,o.jsx)("span",{className:l.default.demoIcon,children:"ðŸ‘‘"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:l.default.demoTitle,children:"Admin Demo"}),(0,o.jsx)("div",{className:l.default.demoDesc,children:"Full access"})]})]}),(0,o.jsxs)("button",{type:"button",className:l.default.demoButton,onClick:()=>b("user"),disabled:i,children:[(0,o.jsx)("span",{className:l.default.demoIcon,children:"ðŸ‘¤"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:l.default.demoTitle,children:"User Demo"}),(0,o.jsx)("div",{className:l.default.demoDesc,children:"Limited access"})]})]})]})]}),(0,o.jsxs)("div",{className:l.default.loginFooter,children:[(0,o.jsxs)("p",{className:l.default.footerText,children:["Don't have an account?",(0,o.jsx)("button",{type:"button",className:l.default.signupLink,onClick:()=>{h(!p)},disabled:i,children:"Contact admin"})]}),p&&(0,o.jsx)("div",{className:l.default.contactInfo,children:(0,o.jsxs)("p",{className:l.default.contactText,children:["ðŸ“ž Contact Number: ",(0,o.jsx)("strong",{children:"077-5897772"})]})})]})]}),(0,o.jsx)("div",{className:l.default.backgroundPattern})]})}])}]);