{"version":3,"sources":["turbopack:///[project]/src/app/grn/add/add.module.css [app-ssr] (css module)","turbopack:///[project]/src/app/grn/add/page.tsx"],"sourcesContent":["__turbopack_context__.v({\n  \"active\": \"add-module__gyZfRq__active\",\n  \"addButton\": \"add-module__gyZfRq__addButton\",\n  \"clearButton\": \"add-module__gyZfRq__clearButton\",\n  \"clearSupplierButton\": \"add-module__gyZfRq__clearSupplierButton\",\n  \"container\": \"add-module__gyZfRq__container\",\n  \"dropdown\": \"add-module__gyZfRq__dropdown\",\n  \"dropdownItem\": \"add-module__gyZfRq__dropdownItem\",\n  \"editButton\": \"add-module__gyZfRq__editButton\",\n  \"error\": \"add-module__gyZfRq__error\",\n  \"field\": \"add-module__gyZfRq__field\",\n  \"form\": \"add-module__gyZfRq__form\",\n  \"grnActions\": \"add-module__gyZfRq__grnActions\",\n  \"grnAmount\": \"add-module__gyZfRq__grnAmount\",\n  \"grnDetails\": \"add-module__gyZfRq__grnDetails\",\n  \"grnHeader\": \"add-module__gyZfRq__grnHeader\",\n  \"grnInfo\": \"add-module__gyZfRq__grnInfo\",\n  \"grnItem\": \"add-module__gyZfRq__grnItem\",\n  \"grnItems\": \"add-module__gyZfRq__grnItems\",\n  \"grnsContent\": \"add-module__gyZfRq__grnsContent\",\n  \"grnsHeader\": \"add-module__gyZfRq__grnsHeader\",\n  \"grnsList\": \"add-module__gyZfRq__grnsList\",\n  \"header\": \"add-module__gyZfRq__header\",\n  \"input\": \"add-module__gyZfRq__input\",\n  \"inputWrapper\": \"add-module__gyZfRq__inputWrapper\",\n  \"itemsTable\": \"add-module__gyZfRq__itemsTable\",\n  \"label\": \"add-module__gyZfRq__label\",\n  \"loadButton\": \"add-module__gyZfRq__loadButton\",\n  \"noGrns\": \"add-module__gyZfRq__noGrns\",\n  \"pageBtn\": \"add-module__gyZfRq__pageBtn\",\n  \"pageNumbers\": \"add-module__gyZfRq__pageNumbers\",\n  \"pagination\": \"add-module__gyZfRq__pagination\",\n  \"paginationInfo\": \"add-module__gyZfRq__paginationInfo\",\n  \"productInfo\": \"add-module__gyZfRq__productInfo\",\n  \"productSearch\": \"add-module__gyZfRq__productSearch\",\n  \"readOnlyInput\": \"add-module__gyZfRq__readOnlyInput\",\n  \"removeButton\": \"add-module__gyZfRq__removeButton\",\n  \"row\": \"add-module__gyZfRq__row\",\n  \"searchContainer\": \"add-module__gyZfRq__searchContainer\",\n  \"section\": \"add-module__gyZfRq__section\",\n  \"sectionTitle\": \"add-module__gyZfRq__sectionTitle\",\n  \"select\": \"add-module__gyZfRq__select\",\n  \"selectedInput\": \"add-module__gyZfRq__selectedInput\",\n  \"slideIn\": \"add-module__gyZfRq__slideIn\",\n  \"smallInput\": \"add-module__gyZfRq__smallInput\",\n  \"submitButton\": \"add-module__gyZfRq__submitButton\",\n  \"submitSection\": \"add-module__gyZfRq__submitSection\",\n  \"subtitle\": \"add-module__gyZfRq__subtitle\",\n  \"success\": \"add-module__gyZfRq__success\",\n  \"supplierInfo\": \"add-module__gyZfRq__supplierInfo\",\n  \"tableFooter\": \"add-module__gyZfRq__tableFooter\",\n  \"tableHeader\": \"add-module__gyZfRq__tableHeader\",\n  \"tableRow\": \"add-module__gyZfRq__tableRow\",\n  \"title\": \"add-module__gyZfRq__title\",\n  \"totalAmount\": \"add-module__gyZfRq__totalAmount\",\n  \"totalCost\": \"add-module__gyZfRq__totalCost\",\n});\n","'use client';\r\n\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { useTheme } from '@/contexts/ThemeContext';\r\nimport { usePageProtection } from '@/components/ProtectedRoute';\r\nimport { handleNumberInputWheel } from '@/lib/numberInputUtils';\r\nimport { useState, useEffect } from 'react';\r\nimport styles from './add.module.css';\r\n\r\ninterface Supplier {\r\n  id: number;\r\n  supplierName: string;\r\n  contactNumber: string;\r\n  email: string;\r\n  address: string;\r\n}\r\n\r\ninterface Product {\r\n  id: number;\r\n  productCode: string;\r\n  itemName: string;\r\n  sellingPrice: number;\r\n  availableQty: number;\r\n  category: string;\r\n}\r\n\r\ninterface GrnItem {\r\n  id?: number;\r\n  productId: number;\r\n  productCode: string;\r\n  itemName: string;\r\n  quantity: number;\r\n  costPrice: number;\r\n  totalCost: number;\r\n}\r\n\r\ninterface Grn {\r\n  id: number;\r\n  grnDate: string;\r\n  supplier: {\r\n    id: number;\r\n    supplierName: string;\r\n    contactNumber: string;\r\n    email?: string;\r\n    address?: string;\r\n  };\r\n  invoiceNumber: string;\r\n  poNumber?: string;\r\n  paymentType: string;\r\n  totalAmount: number;\r\n  user: string;\r\n  grnItems: {\r\n    id: number;\r\n    quantity: number;\r\n    costPrice: number;\r\n    totalCost: number;\r\n    product: {\r\n      id: number;\r\n      productCode: string;\r\n      itemName: string;\r\n    };\r\n  }[];\r\n}\r\n\r\nexport default function GrnAddPage() {\r\n  // Page protection - check if user has access to GRN pages\r\n  const { isAuthorized, isLoading: authLoading } = usePageProtection('grn');\r\n  \r\n  const { user } = useAuth();\r\n  const { isDarkMode } = useTheme();\r\n  const [message, setMessage] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  // GRN Form Data\r\n  const [grnData, setGrnData] = useState({\r\n    grnDate: new Date().toISOString().split('T')[0], // Today's date\r\n    supplierId: '',\r\n    invoiceNumber: '',\r\n    poNumber: '',\r\n    paymentType: 'cash'\r\n  });\r\n\r\n  // Selected supplier\r\n  const [selectedSupplier, setSelectedSupplier] = useState<Supplier | null>(null);\r\n  \r\n  // Supplier search\r\n  const [supplierSearchTerm, setSupplierSearchTerm] = useState('');\r\n  const [supplierSearchResults, setSupplierSearchResults] = useState<Supplier[]>([]);\r\n  const [showSupplierDropdown, setShowSupplierDropdown] = useState(false);\r\n  \r\n  // Product search\r\n  const [productSearchTerm, setProductSearchTerm] = useState('');\r\n  const [productSearchResults, setProductSearchResults] = useState<Product[]>([]);\r\n  const [showProductDropdown, setShowProductDropdown] = useState(false);\r\n  \r\n  // GRN Items\r\n  const [grnItems, setGrnItems] = useState<GrnItem[]>([]);\r\n  const [newItem, setNewItem] = useState({\r\n    productId: 0,\r\n    quantity: 1,\r\n    costPrice: 0\r\n  });\r\n\r\n  // GRN List\r\n  const [grns, setGrns] = useState<Grn[]>([]);\r\n  const [isGrnLoaded, setIsGrnLoaded] = useState(false);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pagination, setPagination] = useState({\r\n    currentPage: 1,\r\n    totalPages: 1,\r\n    totalCount: 0,\r\n    hasNext: false,\r\n    hasPrev: false\r\n  });\r\n\r\n  // Edit GRN state\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editingGrnId, setEditingGrnId] = useState<number | null>(null);\r\n  \r\n  // Remove item loading state\r\n  const [removingItemId, setRemovingItemId] = useState<number | null>(null);\r\n\r\n  // Search suppliers\r\n  const searchSuppliers = async (query: string) => {\r\n    if (query.length < 2) {\r\n      setSupplierSearchResults([]);\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      const response = await fetch(`/api/suppliers/search?q=${encodeURIComponent(query)}`);\r\n      const data = await response.json();\r\n      \r\n      if (response.ok) {\r\n        setSupplierSearchResults(data.suppliers || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error searching suppliers:', error);\r\n    }\r\n  };\r\n\r\n  // Search products\r\n  const searchProducts = async (query: string) => {\r\n    if (query.length < 2) {\r\n      setProductSearchResults([]);\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      const response = await fetch(`/api/products/search?q=${encodeURIComponent(query)}`);\r\n      const data = await response.json();\r\n      \r\n      if (response.ok) {\r\n        setProductSearchResults(data.products || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error searching products:', error);\r\n    }\r\n  };\r\n\r\n  // Handle supplier search\r\n  useEffect(() => {\r\n    const timeoutId = setTimeout(() => {\r\n      if (supplierSearchTerm && !selectedSupplier) {\r\n        searchSuppliers(supplierSearchTerm);\r\n        setShowSupplierDropdown(true);\r\n      } else if (supplierSearchTerm && selectedSupplier && supplierSearchTerm !== selectedSupplier.supplierName) {\r\n        // User is typing again after selecting a supplier\r\n        setSelectedSupplier(null);\r\n        setGrnData(prev => ({ ...prev, supplierId: '' }));\r\n        searchSuppliers(supplierSearchTerm);\r\n        setShowSupplierDropdown(true);\r\n      } else {\r\n        setSupplierSearchResults([]);\r\n        setShowSupplierDropdown(false);\r\n      }\r\n    }, 300);\r\n\r\n    return () => clearTimeout(timeoutId);\r\n  }, [supplierSearchTerm, selectedSupplier]);\r\n\r\n  // Handle product search\r\n  useEffect(() => {\r\n    const timeoutId = setTimeout(() => {\r\n      if (productSearchTerm) {\r\n        searchProducts(productSearchTerm);\r\n        setShowProductDropdown(true);\r\n      } else {\r\n        setProductSearchResults([]);\r\n        setShowProductDropdown(false);\r\n      }\r\n    }, 300);\r\n\r\n    return () => clearTimeout(timeoutId);\r\n  }, [productSearchTerm]);\r\n\r\n  // Select supplier\r\n  const selectSupplier = (supplier: Supplier) => {\r\n    setSelectedSupplier(supplier);\r\n    setSupplierSearchTerm(supplier.supplierName);\r\n    setGrnData(prev => ({ ...prev, supplierId: supplier.id.toString() }));\r\n    \r\n    // Close dropdown and clear search results immediately\r\n    setShowSupplierDropdown(false);\r\n    setSupplierSearchResults([]);\r\n    \r\n    // Remove focus from input to prevent reopening dropdown\r\n    setTimeout(() => {\r\n      const activeElement = document.activeElement as HTMLElement;\r\n      if (activeElement && activeElement.blur) {\r\n        activeElement.blur();\r\n      }\r\n    }, 100);\r\n  };\r\n\r\n  // Add product to GRN items\r\n  const addProductToGrn = async (product: Product) => {\r\n    // Check if product already exists in GRN\r\n    const existingItem = grnItems.find(item => item.productId === product.id);\r\n    \r\n    if (existingItem) {\r\n      setError('Product already added to GRN. You can update quantity in the table below.');\r\n      return;\r\n    }\r\n\r\n    // Validate inputs one more time\r\n    if (!newItem.quantity || newItem.quantity <= 0) {\r\n      setError('Invalid quantity. Please enter a number greater than 0.');\r\n      return;\r\n    }\r\n\r\n    if (!newItem.costPrice || newItem.costPrice <= 0) {\r\n      setError('Invalid cost price. Please enter a number greater than 0.');\r\n      return;\r\n    }\r\n\r\n    // If in edit mode, add item to database immediately\r\n    if (isEditing && editingGrnId && user) {\r\n      setIsLoading(true);\r\n      try {\r\n        const response = await fetch('/api/grn/add-item', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'x-user-data': JSON.stringify(user)\r\n          },\r\n          body: JSON.stringify({\r\n            grnId: editingGrnId,\r\n            productId: product.id,\r\n            quantity: newItem.quantity,\r\n            costPrice: newItem.costPrice\r\n          })\r\n        });\r\n\r\n        const data = await response.json();\r\n        \r\n        if (!data.success) {\r\n          setError(data.error || 'Failed to add item to GRN');\r\n          setIsLoading(false);\r\n          return;\r\n        }\r\n\r\n        // Update success message with more details\r\n        const { result } = data;\r\n        setMessage(\r\n          `Item added successfully! ` +\r\n          `GRN total updated to Rs. ${parseFloat(result.newTotalAmount).toFixed(2)}. ` +\r\n          `${result.totalItemsCount} item(s) in GRN.`\r\n        );\r\n        \r\n        // Add item to local state\r\n        const newGrnItem: GrnItem = {\r\n          productId: product.id,\r\n          productCode: product.productCode,\r\n          itemName: product.itemName,\r\n          quantity: newItem.quantity,\r\n          costPrice: newItem.costPrice,\r\n          totalCost: newItem.quantity * newItem.costPrice\r\n        };\r\n\r\n        setGrnItems(prev => [...prev, newGrnItem]);\r\n        \r\n        // Clear form inputs\r\n        setProductSearchTerm('');\r\n        setShowProductDropdown(false);\r\n        setProductSearchResults([]);\r\n        setNewItem({ productId: 0, quantity: 1, costPrice: 0 });\r\n        setError('');\r\n        \r\n        // Reload GRNs list to show updated totals if already loaded\r\n        if (isGrnLoaded) {\r\n          loadGrns(currentPage);\r\n        }\r\n        \r\n        // Clear message after 5 seconds\r\n        setTimeout(() => setMessage(''), 5000);\r\n        \r\n      } catch (error) {\r\n        console.error('Error adding item to GRN:', error);\r\n        setError('An error occurred while adding item to GRN');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    } else {\r\n      // Create mode: Just add to local state\r\n      const newGrnItem: GrnItem = {\r\n        productId: product.id,\r\n        productCode: product.productCode,\r\n        itemName: product.itemName,\r\n        quantity: newItem.quantity,\r\n        costPrice: newItem.costPrice,\r\n        totalCost: newItem.quantity * newItem.costPrice\r\n      };\r\n\r\n      setGrnItems(prev => [...prev, newGrnItem]);\r\n      setProductSearchTerm('');\r\n      setShowProductDropdown(false);\r\n      setProductSearchResults([]);\r\n      setNewItem({ productId: 0, quantity: 1, costPrice: 0 });\r\n      setError('');\r\n      setMessage('Product added to GRN successfully!');\r\n      \r\n      // Clear success message after 3 seconds\r\n      setTimeout(() => setMessage(''), 3000);\r\n    }\r\n  };\r\n\r\n  // Remove item from GRN\r\n  const removeGrnItem = async (productId: number) => {\r\n    // Find the item to be removed\r\n    const itemToRemove = grnItems.find(item => item.productId === productId);\r\n    \r\n    if (!itemToRemove) {\r\n      setError('Item not found');\r\n      return;\r\n    }\r\n\r\n    // Show confirmation dialog\r\n    const confirmed = window.confirm(\r\n      `Are you sure you want to remove this item?\\n\\n` +\r\n      `Product: ${itemToRemove.itemName}\\n` +\r\n      `Quantity: ${itemToRemove.quantity}\\n` +\r\n      `Cost Price: Rs. ${parseFloat(itemToRemove.costPrice.toString()).toFixed(2)}\\n` +\r\n      `Total Cost: Rs. ${parseFloat(itemToRemove.totalCost.toString()).toFixed(2)}\\n\\n` +\r\n      `This action cannot be undone.`\r\n    );\r\n\r\n    if (!confirmed) {\r\n      return; // User cancelled\r\n    }\r\n\r\n    // Set loading state for this specific item\r\n    setRemovingItemId(productId);\r\n\r\n    // If in edit mode and user exists, update GRN, GRN items, and product tables via API\r\n    if (isEditing && editingGrnId && user) {\r\n      try {\r\n        const response = await fetch(`/api/grn/remove-item?grnId=${editingGrnId}&productId=${productId}`, {\r\n          method: 'DELETE',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'x-user-data': JSON.stringify(user)\r\n          }\r\n        });\r\n\r\n        const data = await response.json();\r\n        \r\n        if (!data.success) {\r\n          setError(data.error || 'Failed to remove item from GRN');\r\n          setRemovingItemId(null);\r\n          return;\r\n        }\r\n\r\n        // Update success message with more details\r\n        const { result } = data;\r\n        setMessage(\r\n          `Item removed successfully! ` +\r\n          `GRN total updated to Rs. ${parseFloat(result.newTotalAmount).toFixed(2)}. ` +\r\n          `${result.remainingItemsCount} item(s) remaining in GRN.`\r\n        );\r\n        \r\n        // Clear message after 5 seconds (longer for more detailed message)\r\n        setTimeout(() => setMessage(''), 5000);\r\n        \r\n        // Remove item from local state\r\n        setGrnItems(prev => prev.filter(item => item.productId !== productId));\r\n        \r\n        // Clear loading state\r\n        setRemovingItemId(null);\r\n        \r\n        // Reload GRNs list to show updated totals if already loaded\r\n        if (isGrnLoaded) {\r\n          loadGrns(currentPage);\r\n        }\r\n        \r\n        return; // Exit here for edit mode\r\n        \r\n      } catch (error) {\r\n        console.error('Error removing GRN item:', error);\r\n        setError('An error occurred while removing GRN item');\r\n        setRemovingItemId(null);\r\n        return;\r\n      }\r\n    }\r\n\r\n    // For create mode (not editing): Remove item from local state only\r\n    setGrnItems(prev => prev.filter(item => item.productId !== productId));\r\n    \r\n    // Clear loading state\r\n    setRemovingItemId(null);\r\n    \r\n    if (!isEditing) {\r\n      setMessage('Item removed successfully!');\r\n      setTimeout(() => setMessage(''), 3000);\r\n    }\r\n  };\r\n\r\n  // Update item quantity or cost price\r\n  const updateGrnItem = (productId: number, field: 'quantity' | 'costPrice', value: number) => {\r\n    setGrnItems(prev => prev.map(item => {\r\n      if (item.productId === productId) {\r\n        const updatedItem = { ...item, [field]: value };\r\n        updatedItem.totalCost = updatedItem.quantity * updatedItem.costPrice;\r\n        return updatedItem;\r\n      }\r\n      return item;\r\n    }));\r\n  };\r\n\r\n  // Calculate total amount\r\n  const calculateTotalAmount = () => {\r\n    return grnItems.reduce((total, item) => total + item.totalCost, 0);\r\n  };\r\n\r\n  // Load GRNs\r\n  const loadGrns = async (page = 1, search = '') => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError('');\r\n      \r\n      const params = new URLSearchParams({\r\n        page: page.toString(),\r\n        limit: '10',\r\n        ...(search && { search })\r\n      });\r\n      \r\n      const response = await fetch(`/api/grn?${params}`);\r\n      const data = await response.json();\r\n      \r\n      if (response.ok && data.grns) {\r\n        setGrns(data.grns);\r\n        setPagination(data.pagination);\r\n        setCurrentPage(page);\r\n        setIsGrnLoaded(true);\r\n        setMessage(`GRNs loaded successfully! (Page ${page} of ${data.pagination.totalPages})`);\r\n      } else {\r\n        setError(data.error || 'Failed to load GRNs');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading GRNs:', error);\r\n      setError('An error occurred while loading GRNs');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Load GRN for editing\r\n  const loadGrnForEdit = (grn: Grn) => {\r\n    try {\r\n      setError('');\r\n      setMessage('');\r\n      \r\n      // Set editing mode\r\n      setIsEditing(true);\r\n      setEditingGrnId(grn.id);\r\n      \r\n      // Load GRN header data\r\n      setGrnData({\r\n        grnDate: grn.grnDate.split('T')[0], // Format date for input\r\n        supplierId: grn.supplier.id.toString(),\r\n        invoiceNumber: grn.invoiceNumber,\r\n        poNumber: grn.poNumber || '',\r\n        paymentType: grn.paymentType\r\n      });\r\n      \r\n      // Load supplier data\r\n      setSelectedSupplier({\r\n        id: grn.supplier.id,\r\n        supplierName: grn.supplier.supplierName,\r\n        contactNumber: grn.supplier.contactNumber,\r\n        email: grn.supplier.email || '',\r\n        address: grn.supplier.address || ''\r\n      });\r\n      setSupplierSearchTerm(grn.supplier.supplierName);\r\n      \r\n      // Load GRN items\r\n      const items: GrnItem[] = grn.grnItems.map(item => ({\r\n        productId: item.product.id,\r\n        productCode: item.product.productCode,\r\n        itemName: item.product.itemName,\r\n        quantity: item.quantity,\r\n        costPrice: item.costPrice,\r\n        totalCost: item.quantity * item.costPrice\r\n      }));\r\n      \r\n      setGrnItems(items);\r\n      \r\n      setMessage(`GRN #${grn.id} loaded for editing. You can now modify and update.`);\r\n      \r\n      // Scroll to top of form\r\n      window.scrollTo({ top: 0, behavior: 'smooth' });\r\n      \r\n    } catch (error) {\r\n      console.error('Error loading GRN for edit:', error);\r\n      setError('Failed to load GRN for editing');\r\n    }\r\n  };\r\n\r\n  // Clear edit mode\r\n  const clearEditMode = () => {\r\n    setIsEditing(false);\r\n    setEditingGrnId(null);\r\n    setRemovingItemId(null); // Reset removing item state\r\n    \r\n    // Reset form\r\n    setGrnData({\r\n      grnDate: new Date().toISOString().split('T')[0],\r\n      supplierId: '',\r\n      invoiceNumber: '',\r\n      poNumber: '',\r\n      paymentType: 'cash'\r\n    });\r\n    setSelectedSupplier(null);\r\n    setSupplierSearchTerm('');\r\n    setGrnItems([]);\r\n    setNewItem({ productId: 0, quantity: 1, costPrice: 0 });\r\n    setError('');\r\n    setMessage('Form cleared. You can now create a new GRN.');\r\n  };\r\n\r\n  // Submit GRN\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!user) {\r\n      setError('Please log in to ' + (isEditing ? 'update' : 'create') + ' GRN');\r\n      return;\r\n    }\r\n\r\n    if (!selectedSupplier) {\r\n      setError('Please select a supplier');\r\n      return;\r\n    }\r\n\r\n    if (grnItems.length === 0) {\r\n      setError('Please add at least one product');\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setError('');\r\n    setMessage('');\r\n\r\n    try {\r\n      const url = isEditing ? `/api/grn/${editingGrnId}` : '/api/grn';\r\n      const method = isEditing ? 'PUT' : 'POST';\r\n      \r\n      const response = await fetch(url, {\r\n        method: method,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-user-data': JSON.stringify(user)\r\n        },\r\n        body: JSON.stringify({\r\n          ...grnData,\r\n          items: grnItems\r\n        })\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        setMessage(isEditing ? 'GRN updated successfully!' : 'GRN created successfully!');\r\n        \r\n        // Clear edit mode if updating\r\n        if (isEditing) {\r\n          clearEditMode();\r\n        } else {\r\n          // Reset form for new GRN\r\n          setGrnData({\r\n            grnDate: new Date().toISOString().split('T')[0],\r\n            supplierId: '',\r\n            invoiceNumber: '',\r\n            poNumber: '',\r\n            paymentType: 'cash'\r\n          });\r\n          setSelectedSupplier(null);\r\n          setSupplierSearchTerm('');\r\n          setGrnItems([]);\r\n        }\r\n        \r\n        // Reload GRNs if already loaded\r\n        if (isGrnLoaded) {\r\n          loadGrns(currentPage);\r\n        }\r\n      } else {\r\n        setError(data.error || 'Failed to ' + (isEditing ? 'update' : 'create') + ' GRN');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error ' + (isEditing ? 'updating' : 'creating') + ' GRN:', error);\r\n      setError('An error occurred while ' + (isEditing ? 'updating' : 'creating') + ' GRN');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Show loading while checking authorization\r\n  if (authLoading || !isAuthorized) {\r\n    return null; // ProtectedRoute component handles the loading UI and redirects\r\n  }\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className={styles.container}>\r\n        <p className={styles.error}>Please log in to access GRN management.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={`${styles.container} ${isDarkMode ? 'dark' : 'light'}`}>\r\n      <div className={styles.header}>\r\n        <h1 className={styles.title}>\r\n          {isEditing ? `Edit GRN #${editingGrnId}` : 'Create New GRN'}\r\n        </h1>\r\n        {isEditing && (\r\n          <button\r\n            type=\"button\"\r\n            onClick={clearEditMode}\r\n            className={styles.clearButton}\r\n          >\r\n            Clear & Create New\r\n          </button>\r\n        )}\r\n      </div>\r\n      \r\n      <form onSubmit={handleSubmit} className={styles.form}>\r\n        {/* GRN Header Section */}\r\n        <div className={styles.section}>\r\n          <h2 className={styles.sectionTitle}>GRN Details</h2>\r\n          \r\n          <div className={styles.row}>\r\n            <div className={styles.field}>\r\n              <label className={styles.label}>GRN Date:</label>\r\n              <input\r\n                type=\"date\"\r\n                value={grnData.grnDate}\r\n                onChange={(e) => setGrnData(prev => ({ ...prev, grnDate: e.target.value }))}\r\n                className={styles.input}\r\n                required\r\n              />\r\n            </div>\r\n            \r\n            <div className={styles.field}>\r\n              <label className={styles.label}>Invoice Number:</label>\r\n              <input\r\n                type=\"text\"\r\n                value={grnData.invoiceNumber}\r\n                onChange={(e) => setGrnData(prev => ({ ...prev, invoiceNumber: e.target.value }))}\r\n                className={styles.input}\r\n                placeholder=\"Enter invoice number\"\r\n                required\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className={styles.row}>\r\n            <div className={styles.field}>\r\n              <label className={styles.label}>PO Number:</label>\r\n              <input\r\n                type=\"text\"\r\n                value={grnData.poNumber}\r\n                onChange={(e) => setGrnData(prev => ({ ...prev, poNumber: e.target.value }))}\r\n                className={styles.input}\r\n                placeholder=\"Enter PO number (optional)\"\r\n              />\r\n            </div>\r\n            \r\n            <div className={styles.field}>\r\n              <label className={styles.label}>Payment Type:</label>\r\n              <select\r\n                value={grnData.paymentType}\r\n                onChange={(e) => setGrnData(prev => ({ ...prev, paymentType: e.target.value }))}\r\n                className={styles.select}\r\n                required\r\n              >\r\n                <option value=\"cash\">Cash</option>\r\n                <option value=\"credit\">Credit</option>\r\n                <option value=\"other\">Other</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Supplier Search */}\r\n          <div className={styles.field}>\r\n            <label className={styles.label}>Supplier:</label>\r\n            <div className={styles.searchContainer}>\r\n              <div className={styles.inputWrapper}>\r\n                <input\r\n                  type=\"text\"\r\n                  value={supplierSearchTerm}\r\n                  onChange={(e) => setSupplierSearchTerm(e.target.value)}\r\n                  onBlur={() => {\r\n                    // Close dropdown after a short delay to allow click selection\r\n                    setTimeout(() => {\r\n                      setShowSupplierDropdown(false);\r\n                    }, 200);\r\n                  }}\r\n                  onFocus={() => {\r\n                    // Show dropdown if there are results and no supplier is selected\r\n                    if (supplierSearchResults.length > 0 && !selectedSupplier) {\r\n                      setShowSupplierDropdown(true);\r\n                    }\r\n                  }}\r\n                  className={`${styles.input} ${selectedSupplier ? styles.selectedInput : ''}`}\r\n                  placeholder=\"Search supplier by name, contact, or email...\"\r\n                  required\r\n                />\r\n                {selectedSupplier && (\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setSelectedSupplier(null);\r\n                      setSupplierSearchTerm('');\r\n                      setGrnData(prev => ({ ...prev, supplierId: '' }));\r\n                      setShowSupplierDropdown(false);\r\n                      setSupplierSearchResults([]);\r\n                    }}\r\n                    className={styles.clearSupplierButton}\r\n                    title=\"Clear selected supplier\"\r\n                  >\r\n                    Ã—\r\n                  </button>\r\n                )}\r\n              </div>\r\n              \r\n              {showSupplierDropdown && supplierSearchResults.length > 0 && (\r\n                <div className={styles.dropdown}>\r\n                  {supplierSearchResults.map((supplier) => (\r\n                    <div\r\n                      key={supplier.id}\r\n                      className={styles.dropdownItem}\r\n                      onClick={() => selectSupplier(supplier)}\r\n                    >\r\n                      <div className={styles.supplierInfo}>\r\n                        <strong>{supplier.supplierName}</strong>\r\n                        <span>{supplier.contactNumber}</span>\r\n                        <small>{supplier.email}</small>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Products Section */}\r\n        <div className={styles.section}>\r\n          <h2 className={styles.sectionTitle}>Add Products</h2>\r\n          \r\n          <div className={styles.productSearch}>\r\n            <div className={styles.row}>\r\n              <div className={styles.field}>\r\n                <label className={styles.label}>Search Product:</label>\r\n                <div className={styles.searchContainer}>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={productSearchTerm}\r\n                    onChange={(e) => setProductSearchTerm(e.target.value)}\r\n                    className={styles.input}\r\n                    placeholder=\"Search product by code or name...\"\r\n                  />\r\n                  \r\n                  {showProductDropdown && productSearchResults.length > 0 && (\r\n                    <div className={styles.dropdown}>\r\n                      {productSearchResults.map((product) => (\r\n                        <div\r\n                          key={product.id}\r\n                          className={styles.dropdownItem}\r\n                          onClick={() => {\r\n                            setNewItem(prev => ({ ...prev, productId: product.id }));\r\n                            setProductSearchTerm(`${product.productCode} - ${product.itemName}`);\r\n                            setShowProductDropdown(false);\r\n                            setError(''); // Clear any previous errors\r\n                          }}\r\n                        >\r\n                          <div className={styles.productInfo}>\r\n                            <strong>{product.productCode}</strong>\r\n                            <span>{product.itemName}</span>\r\n                            <small>Category: {product.category} | Available: {product.availableQty}</small>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              \r\n              <div className={styles.field}>\r\n                <label className={styles.label}>Quantity:</label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={newItem.quantity}\r\n                  onChange={(e) => setNewItem(prev => ({ ...prev, quantity: parseInt(e.target.value) || 1 }))}\r\n                  onWheel={handleNumberInputWheel}\r\n                  className={styles.input}\r\n                  min=\"1\"\r\n                  required\r\n                />\r\n              </div>\r\n              \r\n              <div className={styles.field}>\r\n                <label className={styles.label}>Cost Price:</label>\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  value={newItem.costPrice}\r\n                  onChange={(e) => setNewItem(prev => ({ ...prev, costPrice: parseFloat(e.target.value) || 0 }))}\r\n                  onWheel={handleNumberInputWheel}\r\n                  className={styles.input}\r\n                  min=\"0\"\r\n                  required\r\n                />\r\n              </div>\r\n              \r\n              <div className={styles.field}>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    // Clear any previous errors and messages\r\n                    setError('');\r\n                    setMessage('');\r\n                    \r\n                    // Debug logging\r\n                    console.log('Add Product clicked:', {\r\n                      productId: newItem.productId,\r\n                      quantity: newItem.quantity,\r\n                      costPrice: newItem.costPrice,\r\n                      productSearchTerm\r\n                    });\r\n                    \r\n                    // Validation checks\r\n                    if (!newItem.productId || newItem.productId === 0) {\r\n                      setError('Please select a product from the dropdown');\r\n                      return;\r\n                    }\r\n                    \r\n                    if (!newItem.quantity || newItem.quantity <= 0) {\r\n                      setError('Please enter a valid quantity (greater than 0)');\r\n                      return;\r\n                    }\r\n                    \r\n                    if (!newItem.costPrice || newItem.costPrice <= 0) {\r\n                      setError('Please enter a valid cost price (greater than 0)');\r\n                      return;\r\n                    }\r\n                    \r\n                    // Find the selected product\r\n                    const selectedProduct = productSearchResults.find(p => p.id === newItem.productId) ||\r\n                      (productSearchTerm ? {\r\n                        id: newItem.productId,\r\n                        productCode: productSearchTerm.split(' - ')[0],\r\n                        itemName: productSearchTerm.split(' - ')[1] || productSearchTerm,\r\n                        category: '',\r\n                        sellingPrice: 0,\r\n                        availableQty: 0\r\n                      } : null);\r\n                    \r\n                    if (selectedProduct) {\r\n                      addProductToGrn(selectedProduct);\r\n                    } else {\r\n                      setError('Selected product not found. Please search and select again.');\r\n                    }\r\n                  }}\r\n                  className={styles.addButton}\r\n                  disabled={!newItem.productId || newItem.quantity <= 0 || newItem.costPrice <= 0}\r\n                >\r\n                  Add Product\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* GRN Items Table */}\r\n        {grnItems.length > 0 && (\r\n          <div className={styles.section}>\r\n            <h2 className={styles.sectionTitle}>GRN Items</h2>\r\n            \r\n            <div className={styles.itemsTable}>\r\n              <div className={styles.tableHeader}>\r\n                <div>Product Code</div>\r\n                <div>Product Name</div>\r\n                <div>Quantity</div>\r\n                <div>Cost Price</div>\r\n                <div>Total Cost</div>\r\n                <div>Actions</div>\r\n              </div>\r\n              \r\n              {grnItems.map((item) => (\r\n                <div key={item.productId} className={styles.tableRow}>\r\n                  <div>{item.productCode}</div>\r\n                  <div>{item.itemName}</div>\r\n                  <div>\r\n                    <input\r\n                      type=\"number\"\r\n                      value={item.quantity}\r\n                      onChange={isEditing ? undefined : (e) => updateGrnItem(item.productId, 'quantity', parseInt(e.target.value) || 1)}\r\n                      onWheel={handleNumberInputWheel}\r\n                      className={`${styles.smallInput} ${isEditing ? styles.readOnlyInput : ''}`}\r\n                      min=\"1\"\r\n                      readOnly={isEditing}\r\n                      disabled={isEditing}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <input\r\n                      type=\"number\"\r\n                      step=\"0.01\"\r\n                      value={item.costPrice}\r\n                      onChange={isEditing ? undefined : (e) => updateGrnItem(item.productId, 'costPrice', parseFloat(e.target.value) || 0)}\r\n                      onWheel={handleNumberInputWheel}\r\n                      className={`${styles.smallInput} ${isEditing ? styles.readOnlyInput : ''}`}\r\n                      min=\"0\"\r\n                      readOnly={isEditing}\r\n                      disabled={isEditing}\r\n                    />\r\n                  </div>\r\n                  <div className={styles.totalCost}>Rs. {item.totalCost.toFixed(2)}</div>\r\n                  <div>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => removeGrnItem(item.productId)}\r\n                      className={styles.removeButton}\r\n                      disabled={removingItemId === item.productId || isLoading}\r\n                    >\r\n                      {removingItemId === item.productId ? 'Removing...' : 'Remove'}\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n              \r\n              <div className={styles.tableFooter}>\r\n                <div className={styles.totalAmount}>\r\n                  <strong>Total Amount: Rs. {calculateTotalAmount().toFixed(2)}</strong>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Submit Section */}\r\n        <div className={styles.submitSection}>\r\n          <button\r\n            type=\"submit\"\r\n            className={styles.submitButton}\r\n            disabled={isLoading || !selectedSupplier || grnItems.length === 0}\r\n          >\r\n            {isLoading ? (isEditing ? 'Updating GRN...' : 'Creating GRN...') : (isEditing ? 'Update GRN' : 'Create GRN')}\r\n          </button>\r\n        </div>\r\n\r\n        {message && <p className={styles.success}>{message}</p>}\r\n        {error && <p className={styles.error}>{error}</p>}\r\n      </form>\r\n\r\n      {/* Load GRNs Section */}\r\n      <div className={styles.grnsList}>\r\n        <div className={styles.grnsHeader}>\r\n          <h2 className={styles.subtitle}>Existing GRNs</h2>\r\n          <button\r\n            onClick={() => loadGrns(1)}\r\n            className={styles.loadButton}\r\n            disabled={isLoading}\r\n          >\r\n            {isLoading ? 'Loading...' : 'Load GRNs'}\r\n          </button>\r\n        </div>\r\n\r\n        {isGrnLoaded && (\r\n          <div className={styles.grnsContent}>\r\n            {grns.length === 0 ? (\r\n              <p className={styles.noGrns}>No GRNs found.</p>\r\n            ) : (\r\n              <div className={styles.grnItems}>\r\n                {grns.map((grn) => (\r\n                  <div key={grn.id} className={styles.grnItem}>\r\n                    <div className={styles.grnHeader}>\r\n                      <div className={styles.grnInfo}>\r\n                        <strong>GRN #{grn.id}</strong>\r\n                        <span>Date: {new Date(grn.grnDate).toLocaleDateString()}</span>\r\n                        <span>Invoice: {grn.invoiceNumber}</span>\r\n                      </div>\r\n                      <div className={styles.grnActions}>\r\n                        <div className={styles.grnAmount}>\r\n                          Rs. {parseFloat(grn.totalAmount.toString()).toFixed(2)}\r\n                        </div>\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={() => loadGrnForEdit(grn)}\r\n                          className={styles.editButton}\r\n                          disabled={isLoading}\r\n                        >\r\n                          Edit\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    <div className={styles.grnDetails}>\r\n                      <div>Supplier: {grn.supplier.supplierName}</div>\r\n                      <div>Payment: {grn.paymentType.toUpperCase()}</div>\r\n                      <div>Items: {grn.grnItems.length}</div>\r\n                      <div>User: {grn.user}</div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n\r\n            {/* Pagination */}\r\n            {pagination.totalPages > 1 && (\r\n              <div className={styles.pagination}>\r\n                <button\r\n                  onClick={() => loadGrns(currentPage - 1)}\r\n                  disabled={!pagination.hasPrev || isLoading}\r\n                  className={styles.pageBtn}\r\n                >\r\n                  Previous\r\n                </button>\r\n                \r\n                <div className={styles.pageNumbers}>\r\n                  {Array.from({ length: Math.min(5, pagination.totalPages) }, (_, i) => {\r\n                    const pageNum = Math.max(1, currentPage - 2) + i;\r\n                    if (pageNum <= pagination.totalPages) {\r\n                      return (\r\n                        <button\r\n                          key={pageNum}\r\n                          onClick={() => loadGrns(pageNum)}\r\n                          disabled={isLoading}\r\n                          className={`${styles.pageBtn} ${pageNum === currentPage ? styles.active : ''}`}\r\n                        >\r\n                          {pageNum}\r\n                        </button>\r\n                      );\r\n                    }\r\n                    return null;\r\n                  })}\r\n                </div>\r\n                \r\n                <button\r\n                  onClick={() => loadGrns(currentPage + 1)}\r\n                  disabled={!pagination.hasNext || isLoading}\r\n                  className={styles.pageBtn}\r\n                >\r\n                  Next\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            <div className={styles.paginationInfo}>\r\n              <p>\r\n                Showing page {pagination.currentPage} of {pagination.totalPages} \r\n                ({pagination.totalCount} total GRNs)\r\n              </p>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}