module.exports=[59107,a=>{a.v({backgroundMove:"login-module__WEZH7G__backgroundMove",backgroundPattern:"login-module__WEZH7G__backgroundPattern",cardEntrance:"login-module__WEZH7G__cardEntrance",checkbox:"login-module__WEZH7G__checkbox",checkboxLabel:"login-module__WEZH7G__checkboxLabel",checkboxText:"login-module__WEZH7G__checkboxText",contactInfo:"login-module__WEZH7G__contactInfo",contactText:"login-module__WEZH7G__contactText",demoButton:"login-module__WEZH7G__demoButton",demoButtons:"login-module__WEZH7G__demoButtons",demoDesc:"login-module__WEZH7G__demoDesc",demoIcon:"login-module__WEZH7G__demoIcon",demoSection:"login-module__WEZH7G__demoSection",demoTitle:"login-module__WEZH7G__demoTitle",divider:"login-module__WEZH7G__divider",dividerText:"login-module__WEZH7G__dividerText",errorBanner:"login-module__WEZH7G__errorBanner",errorIcon:"login-module__WEZH7G__errorIcon",errorText:"login-module__WEZH7G__errorText",floatUpDown:"login-module__WEZH7G__floatUpDown",footerText:"login-module__WEZH7G__footerText",forgotPassword:"login-module__WEZH7G__forgotPassword",formGroup:"login-module__WEZH7G__formGroup",formInput:"login-module__WEZH7G__formInput",formLabel:"login-module__WEZH7G__formLabel",formOptions:"login-module__WEZH7G__formOptions",inputError:"login-module__WEZH7G__inputError",inputIcon:"login-module__WEZH7G__inputIcon",inputWrapper:"login-module__WEZH7G__inputWrapper",loadingSpinner:"login-module__WEZH7G__loadingSpinner",loginCard:"login-module__WEZH7G__loginCard",loginContainer:"login-module__WEZH7G__loginContainer",loginFooter:"login-module__WEZH7G__loginFooter",loginForm:"login-module__WEZH7G__loginForm",loginHeader:"login-module__WEZH7G__loginHeader",logo:"login-module__WEZH7G__logo",logoCircle:"login-module__WEZH7G__logoCircle",logoContainer:"login-module__WEZH7G__logoContainer",logoEntrance:"login-module__WEZH7G__logoEntrance",logoIcon:"login-module__WEZH7G__logoIcon",logoInitial:"login-module__WEZH7G__logoInitial",logoSubtext:"login-module__WEZH7G__logoSubtext",logoText:"login-module__WEZH7G__logoText",logoTextContainer:"login-module__WEZH7G__logoTextContainer",signupLink:"login-module__WEZH7G__signupLink",slideInDown:"login-module__WEZH7G__slideInDown",spin:"login-module__WEZH7G__spin",submitButton:"login-module__WEZH7G__submitButton",submitIcon:"login-module__WEZH7G__submitIcon",subtitle:"login-module__WEZH7G__subtitle",togglePassword:"login-module__WEZH7G__togglePassword"})},93482,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(59107);a.s(["default",0,()=>{let a=(0,d.useRouter)(),[f,g]=(0,c.useState)({username:"",password:""}),[h,i]=(0,c.useState)({}),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!1);(0,c.useEffect)(()=>{try{let b=localStorage.getItem("currentUser")||sessionStorage.getItem("currentUser");if(b){let c=JSON.parse(b);c&&c.username&&c.accessPages&&setTimeout(()=>{c.accessPages.includes("home")?a.push("/"):(localStorage.removeItem("currentUser"),sessionStorage.removeItem("currentUser"),window.dispatchEvent(new CustomEvent("authChange")))},50)}}catch(a){localStorage.removeItem("currentUser"),sessionStorage.removeItem("currentUser")}},[a]);let r=a=>{let{name:b,value:c}=a.target;g(a=>({...a,[b]:c})),h[b]&&i(a=>({...a,[b]:""}))},s=async b=>{let c;if(b.preventDefault(),c={},f.username.trim()?f.username.length<3&&(c.username="Username must be at least 3 characters"):c.username="Username is required",f.password?f.password.length<6&&(c.password="Password must be at least 6 characters"):c.password="Password is required",i(c),0===Object.keys(c).length){k(!0),i({});try{let b=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}),c=await b.json();if(c.success&&c.user){let b={...c.user,loginTime:new Date().toISOString()};n?(localStorage.setItem("currentUser",JSON.stringify(b)),localStorage.setItem("rememberLogin","true")):sessionStorage.setItem("currentUser",JSON.stringify(b)),window.dispatchEvent(new CustomEvent("authChange")),setTimeout(()=>{c.user&&(c.user.accessPages.includes("home")?a.push("/"):(localStorage.removeItem("currentUser"),sessionStorage.removeItem("currentUser"),window.dispatchEvent(new CustomEvent("authChange")),i({general:"Access denied. You do not have permission to access the home page."})))},50)}else i({general:c.error||"Login failed. Please try again."})}catch(a){i({general:"Network error. Please check your connection and try again."})}finally{k(!1)}}},t=a=>{g({admin:{username:"username",password:"password"},user:{username:"username",password:"password"}}[a])};return(0,b.jsxs)("div",{className:e.default.loginContainer,children:[(0,b.jsxs)("div",{className:e.default.loginCard,children:[(0,b.jsxs)("div",{className:e.default.loginHeader,children:[(0,b.jsx)("div",{className:e.default.logo,children:(0,b.jsxs)("div",{className:e.default.logoContainer,children:[(0,b.jsx)("div",{className:e.default.logoIcon,children:(0,b.jsx)("div",{className:e.default.logoCircle,children:(0,b.jsx)("span",{className:e.default.logoInitial,children:"H"})})}),(0,b.jsxs)("div",{className:e.default.logoTextContainer,children:[(0,b.jsx)("h1",{className:e.default.logoText,children:"Harshana"}),(0,b.jsx)("span",{className:e.default.logoSubtext,children:"System"})]})]})}),(0,b.jsx)("p",{className:e.default.subtitle,children:"Sign in to your account"})]}),h.general&&(0,b.jsxs)("div",{className:e.default.errorBanner,role:"alert",children:[(0,b.jsx)("span",{className:e.default.errorIcon,children:"âš ï¸"}),(0,b.jsx)("span",{children:h.general})]}),(0,b.jsxs)("form",{onSubmit:s,className:e.default.loginForm,noValidate:!0,children:[(0,b.jsxs)("div",{className:e.default.formGroup,children:[(0,b.jsx)("label",{htmlFor:"username",className:e.default.formLabel,children:"Username"}),(0,b.jsxs)("div",{className:e.default.inputWrapper,children:[(0,b.jsx)("span",{className:e.default.inputIcon,children:"ðŸ‘¤"}),(0,b.jsx)("input",{id:"username",name:"username",type:"text",value:f.username,onChange:r,className:`${e.default.formInput} ${h.username?e.default.inputError:""}`,placeholder:"Enter your username",disabled:j,autoComplete:"username","aria-describedby":h.username?"username-error":void 0,"aria-invalid":h.username?"true":"false"})]}),h.username&&(0,b.jsx)("span",{id:"username-error",className:e.default.errorText,role:"alert",children:h.username})]}),(0,b.jsxs)("div",{className:e.default.formGroup,children:[(0,b.jsx)("label",{htmlFor:"password",className:e.default.formLabel,children:"Password"}),(0,b.jsxs)("div",{className:e.default.inputWrapper,children:[(0,b.jsx)("span",{className:e.default.inputIcon,children:"ðŸ”’"}),(0,b.jsx)("input",{id:"password",name:"password",type:l?"text":"password",value:f.password,onChange:r,className:`${e.default.formInput} ${h.password?e.default.inputError:""}`,placeholder:"Enter your password",disabled:j,autoComplete:"current-password","aria-describedby":h.password?"password-error":void 0,"aria-invalid":h.password?"true":"false"}),(0,b.jsx)("button",{type:"button",className:e.default.togglePassword,onClick:()=>m(!l),disabled:j,"aria-label":l?"Hide password":"Show password",children:l?"ðŸ‘ï¸â€ðŸ—¨ï¸":"ðŸ‘ï¸"})]}),h.password&&(0,b.jsx)("span",{id:"password-error",className:e.default.errorText,role:"alert",children:h.password})]}),(0,b.jsxs)("div",{className:e.default.formOptions,children:[(0,b.jsxs)("label",{className:e.default.checkboxLabel,children:[(0,b.jsx)("input",{type:"checkbox",checked:n,onChange:a=>o(a.target.checked),disabled:j,className:e.default.checkbox}),(0,b.jsx)("span",{className:e.default.checkboxText,children:"Remember me"})]}),(0,b.jsx)("button",{type:"button",className:e.default.forgotPassword,disabled:j,children:"Forgot password?"})]}),(0,b.jsx)("button",{type:"submit",className:e.default.submitButton,disabled:j,children:j?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:e.default.loadingSpinner,children:"â³"}),(0,b.jsx)("span",{children:"Signing In..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"Sign In"}),(0,b.jsx)("span",{className:e.default.submitIcon,children:"â†’"})]})})]}),(0,b.jsxs)("div",{className:e.default.demoSection,children:[(0,b.jsx)("div",{className:e.default.divider,children:(0,b.jsx)("span",{className:e.default.dividerText,children:"Try Demo Accounts"})}),(0,b.jsxs)("div",{className:e.default.demoButtons,children:[(0,b.jsxs)("button",{type:"button",className:e.default.demoButton,onClick:()=>t("admin"),disabled:j,children:[(0,b.jsx)("span",{className:e.default.demoIcon,children:"ðŸ‘‘"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:e.default.demoTitle,children:"Admin Demo"}),(0,b.jsx)("div",{className:e.default.demoDesc,children:"Full access"})]})]}),(0,b.jsxs)("button",{type:"button",className:e.default.demoButton,onClick:()=>t("user"),disabled:j,children:[(0,b.jsx)("span",{className:e.default.demoIcon,children:"ðŸ‘¤"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:e.default.demoTitle,children:"User Demo"}),(0,b.jsx)("div",{className:e.default.demoDesc,children:"Limited access"})]})]})]})]}),(0,b.jsxs)("div",{className:e.default.loginFooter,children:[(0,b.jsxs)("p",{className:e.default.footerText,children:["Don't have an account?",(0,b.jsx)("button",{type:"button",className:e.default.signupLink,onClick:()=>{q(!p)},disabled:j,children:"Contact admin"})]}),p&&(0,b.jsx)("div",{className:e.default.contactInfo,children:(0,b.jsxs)("p",{className:e.default.contactText,children:["ðŸ“ž Contact Number: ",(0,b.jsx)("strong",{children:"077-5897772"})]})})]})]}),(0,b.jsx)("div",{className:e.default.backgroundPattern})]})}])}];

//# sourceMappingURL=src_app_login_5184bbf5._.js.map