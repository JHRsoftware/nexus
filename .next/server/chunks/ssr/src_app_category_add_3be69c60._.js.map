{"version":3,"sources":["turbopack:///[project]/src/app/category/add/add.module.css [app-ssr] (css module)","turbopack:///[project]/src/app/category/add/page.tsx"],"sourcesContent":["__turbopack_context__.v({\n  \"button\": \"add-module__bv7hGW__button\",\n  \"buttonGroup\": \"add-module__bv7hGW__buttonGroup\",\n  \"cancelBtn\": \"add-module__bv7hGW__cancelBtn\",\n  \"categoriesList\": \"add-module__bv7hGW__categoriesList\",\n  \"categoryActions\": \"add-module__bv7hGW__categoryActions\",\n  \"categoryInfo\": \"add-module__bv7hGW__categoryInfo\",\n  \"categoryItem\": \"add-module__bv7hGW__categoryItem\",\n  \"categoryItems\": \"add-module__bv7hGW__categoryItems\",\n  \"categoryName\": \"add-module__bv7hGW__categoryName\",\n  \"categoryUser\": \"add-module__bv7hGW__categoryUser\",\n  \"container\": \"add-module__bv7hGW__container\",\n  \"deleteBtn\": \"add-module__bv7hGW__deleteBtn\",\n  \"editBtn\": \"add-module__bv7hGW__editBtn\",\n  \"editButtons\": \"add-module__bv7hGW__editButtons\",\n  \"editInput\": \"add-module__bv7hGW__editInput\",\n  \"editMode\": \"add-module__bv7hGW__editMode\",\n  \"error\": \"add-module__bv7hGW__error\",\n  \"form\": \"add-module__bv7hGW__form\",\n  \"input\": \"add-module__bv7hGW__input\",\n  \"saveBtn\": \"add-module__bv7hGW__saveBtn\",\n  \"subtitle\": \"add-module__bv7hGW__subtitle\",\n  \"success\": \"add-module__bv7hGW__success\",\n  \"title\": \"add-module__bv7hGW__title\",\n  \"viewMode\": \"add-module__bv7hGW__viewMode\",\n});\n","'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport styles from './add.module.css';\r\n\r\ninterface Category {\r\n  id: number;\r\n  category: string;\r\n  user: string;\r\n}\r\n\r\nconst AddCategoryPage = () => {\r\n  const [category, setCategory] = useState('');\r\n  const [success, setSuccess] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [categories, setCategories] = useState<Category[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [editingId, setEditingId] = useState<number | null>(null);\r\n  const [editValue, setEditValue] = useState('');\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setSuccess(false);\r\n    if (!category.trim()) {\r\n      setError('Category name is required');\r\n      return;\r\n    }\r\n    try {\r\n      // Get current user from localStorage\r\n      const currentUser = localStorage.getItem('currentUser') || sessionStorage.getItem('currentUser');\r\n      console.log('Current user from storage:', currentUser); // Debug log\r\n      \r\n      const headers: HeadersInit = { 'Content-Type': 'application/json' };\r\n      \r\n      if (currentUser) {\r\n        headers['x-user-data'] = currentUser;\r\n        console.log('Sending user data in header:', currentUser); // Debug log\r\n      } else {\r\n        console.log('No user data found in storage'); // Debug log\r\n      }\r\n      \r\n      const res = await fetch('/api/category', {\r\n        method: 'POST',\r\n        headers,\r\n        body: JSON.stringify({ category }),\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok && data.success) {\r\n        setSuccess(true);\r\n        setCategory('');\r\n      } else {\r\n        setError(data.error || 'Failed to add category');\r\n      }\r\n    } catch (err) {\r\n      setError('Network error. Please try again.');\r\n    }\r\n  };\r\n\r\n  // Load categories from database\r\n  const loadCategories = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch('/api/category');\r\n      const data = await res.json();\r\n      if (data.success) {\r\n        setCategories(data.categories);\r\n      } else {\r\n        setError('Failed to load categories');\r\n      }\r\n    } catch (err) {\r\n      setError('Network error. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Start editing a category\r\n  const startEdit = (id: number, currentValue: string) => {\r\n    setEditingId(id);\r\n    setEditValue(currentValue);\r\n  };\r\n\r\n  // Cancel editing\r\n  const cancelEdit = () => {\r\n    setEditingId(null);\r\n    setEditValue('');\r\n  };\r\n\r\n  // Update category\r\n  const updateCategory = async (id: number) => {\r\n    if (!editValue.trim()) {\r\n      setError('Category name is required');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await fetch('/api/category', {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ id, category: editValue }),\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok && data.success) {\r\n        setCategories(categories.map(cat => \r\n          cat.id === id ? { ...cat, category: editValue } : cat\r\n        ));\r\n        cancelEdit();\r\n        setSuccess(true);\r\n      } else {\r\n        setError(data.error || 'Failed to update category');\r\n      }\r\n    } catch (err) {\r\n      setError('Network error. Please try again.');\r\n    }\r\n  };\r\n\r\n  // Delete category\r\n  const deleteCategory = async (id: number, categoryName: string) => {\r\n    if (!confirm(`Are you sure you want to delete \"${categoryName}\"?`)) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(`/api/category?id=${id}`, {\r\n        method: 'DELETE',\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok && data.success) {\r\n        setCategories(categories.filter(cat => cat.id !== id));\r\n        setSuccess(true);\r\n      } else {\r\n        setError(data.error || 'Failed to delete category');\r\n      }\r\n    } catch (err) {\r\n      setError('Network error. Please try again.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <h1 className={styles.title}>Category Management</h1>\r\n      \r\n      {/* Add Category Form */}\r\n      <form className={styles.form} onSubmit={handleSubmit}>\r\n        <input\r\n          type=\"text\"\r\n          className=\"themed-input\"\r\n          placeholder=\"Enter category name\"\r\n          value={category}\r\n          onChange={e => setCategory(e.target.value)}\r\n        />\r\n        <div className={styles.buttonGroup}>\r\n          <button type=\"submit\" className=\"themed-button primary-action\">Add Category</button>\r\n          <button type=\"button\" className=\"themed-button secondary\" onClick={loadCategories} disabled={loading}>\r\n            {loading ? 'Loading...' : 'Load Categories'}\r\n          </button>\r\n        </div>\r\n      </form>\r\n      \r\n      {error && <p className={styles.error}>{error}</p>}\r\n      {success && <p className={styles.success}>Operation completed successfully!</p>}\r\n\r\n      {/* Categories List */}\r\n      {categories.length > 0 && (\r\n        <div className={styles.categoriesList}>\r\n          <h2 className={styles.subtitle}>Categories ({categories.length})</h2>\r\n          <div className={styles.categoryItems}>\r\n            {categories.map((cat) => (\r\n              <div key={cat.id} className={styles.categoryItem}>\r\n                {editingId === cat.id ? (\r\n                  <div className={styles.editMode}>\r\n                    <input\r\n                      type=\"text\"\r\n                      className={styles.editInput}\r\n                      value={editValue}\r\n                      onChange={e => setEditValue(e.target.value)}\r\n                    />\r\n                    <div className={styles.editButtons}>\r\n                      <button \r\n                        className={styles.saveBtn}\r\n                        onClick={() => updateCategory(cat.id)}\r\n                      >\r\n                        ‚úì Save\r\n                      </button>\r\n                      <button \r\n                        className={styles.cancelBtn}\r\n                        onClick={cancelEdit}\r\n                      >\r\n                        ‚úï Cancel\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <div className={styles.viewMode}>\r\n                    <div className={styles.categoryInfo}>\r\n                      <span className={styles.categoryName}>{cat.category}</span>\r\n                      <span className={styles.categoryUser}>by {cat.user}</span>\r\n                    </div>\r\n                    <div className={styles.categoryActions}>\r\n                      <button \r\n                        className={styles.editBtn}\r\n                        onClick={() => startEdit(cat.id, cat.category)}\r\n                      >\r\n                        ‚úèÔ∏è Edit\r\n                      </button>\r\n                      <button \r\n                        className={styles.deleteBtn}\r\n                        onClick={() => deleteCategory(cat.id, cat.category)}\r\n                      >\r\n                        üóëÔ∏è Delete\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddCategoryPage;\r\n"],"names":[],"mappings":"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"}