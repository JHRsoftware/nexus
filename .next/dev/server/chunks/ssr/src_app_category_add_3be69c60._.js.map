{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/category/add/add.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"button\": \"add-module__bv7hGW__button\",\n  \"buttonGroup\": \"add-module__bv7hGW__buttonGroup\",\n  \"cancelBtn\": \"add-module__bv7hGW__cancelBtn\",\n  \"categoriesList\": \"add-module__bv7hGW__categoriesList\",\n  \"categoryActions\": \"add-module__bv7hGW__categoryActions\",\n  \"categoryInfo\": \"add-module__bv7hGW__categoryInfo\",\n  \"categoryItem\": \"add-module__bv7hGW__categoryItem\",\n  \"categoryItems\": \"add-module__bv7hGW__categoryItems\",\n  \"categoryName\": \"add-module__bv7hGW__categoryName\",\n  \"categoryUser\": \"add-module__bv7hGW__categoryUser\",\n  \"container\": \"add-module__bv7hGW__container\",\n  \"deleteBtn\": \"add-module__bv7hGW__deleteBtn\",\n  \"editBtn\": \"add-module__bv7hGW__editBtn\",\n  \"editButtons\": \"add-module__bv7hGW__editButtons\",\n  \"editInput\": \"add-module__bv7hGW__editInput\",\n  \"editMode\": \"add-module__bv7hGW__editMode\",\n  \"error\": \"add-module__bv7hGW__error\",\n  \"form\": \"add-module__bv7hGW__form\",\n  \"input\": \"add-module__bv7hGW__input\",\n  \"saveBtn\": \"add-module__bv7hGW__saveBtn\",\n  \"subtitle\": \"add-module__bv7hGW__subtitle\",\n  \"success\": \"add-module__bv7hGW__success\",\n  \"title\": \"add-module__bv7hGW__title\",\n  \"viewMode\": \"add-module__bv7hGW__viewMode\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["file:///D:/New%20NextJs%20Project%20Samitha/my-nextjs-app%20-%20Postgres/src/app/category/add/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport styles from './add.module.css';\r\n\r\ninterface Category {\r\n  id: number;\r\n  category: string;\r\n  user: string;\r\n}\r\n\r\nconst AddCategoryPage = () => {\r\n  const [category, setCategory] = useState('');\r\n  const [success, setSuccess] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [categories, setCategories] = useState<Category[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [editingId, setEditingId] = useState<number | null>(null);\r\n  const [editValue, setEditValue] = useState('');\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setSuccess(false);\r\n    if (!category.trim()) {\r\n      setError('Category name is required');\r\n      return;\r\n    }\r\n    try {\r\n      // Get current user from localStorage\r\n      const currentUser = localStorage.getItem('currentUser') || sessionStorage.getItem('currentUser');\r\n      console.log('Current user from storage:', currentUser); // Debug log\r\n      \r\n      const headers: HeadersInit = { 'Content-Type': 'application/json' };\r\n      \r\n      if (currentUser) {\r\n        headers['x-user-data'] = currentUser;\r\n        console.log('Sending user data in header:', currentUser); // Debug log\r\n      } else {\r\n        console.log('No user data found in storage'); // Debug log\r\n      }\r\n      \r\n      const res = await fetch('/api/category', {\r\n        method: 'POST',\r\n        headers,\r\n        body: JSON.stringify({ category }),\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok && data.success) {\r\n        setSuccess(true);\r\n        setCategory('');\r\n      } else {\r\n        setError(data.error || 'Failed to add category');\r\n      }\r\n    } catch (err) {\r\n      setError('Network error. Please try again.');\r\n    }\r\n  };\r\n\r\n  // Load categories from database\r\n  const loadCategories = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch('/api/category');\r\n      const data = await res.json();\r\n      if (data.success) {\r\n        setCategories(data.categories);\r\n      } else {\r\n        setError('Failed to load categories');\r\n      }\r\n    } catch (err) {\r\n      setError('Network error. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Start editing a category\r\n  const startEdit = (id: number, currentValue: string) => {\r\n    setEditingId(id);\r\n    setEditValue(currentValue);\r\n  };\r\n\r\n  // Cancel editing\r\n  const cancelEdit = () => {\r\n    setEditingId(null);\r\n    setEditValue('');\r\n  };\r\n\r\n  // Update category\r\n  const updateCategory = async (id: number) => {\r\n    if (!editValue.trim()) {\r\n      setError('Category name is required');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await fetch('/api/category', {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ id, category: editValue }),\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok && data.success) {\r\n        setCategories(categories.map(cat => \r\n          cat.id === id ? { ...cat, category: editValue } : cat\r\n        ));\r\n        cancelEdit();\r\n        setSuccess(true);\r\n      } else {\r\n        setError(data.error || 'Failed to update category');\r\n      }\r\n    } catch (err) {\r\n      setError('Network error. Please try again.');\r\n    }\r\n  };\r\n\r\n  // Delete category\r\n  const deleteCategory = async (id: number, categoryName: string) => {\r\n    if (!confirm(`Are you sure you want to delete \"${categoryName}\"?`)) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(`/api/category?id=${id}`, {\r\n        method: 'DELETE',\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok && data.success) {\r\n        setCategories(categories.filter(cat => cat.id !== id));\r\n        setSuccess(true);\r\n      } else {\r\n        setError(data.error || 'Failed to delete category');\r\n      }\r\n    } catch (err) {\r\n      setError('Network error. Please try again.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <h1 className={styles.title}>Category Management</h1>\r\n      \r\n      {/* Add Category Form */}\r\n      <form className={styles.form} onSubmit={handleSubmit}>\r\n        <input\r\n          type=\"text\"\r\n          className=\"themed-input\"\r\n          placeholder=\"Enter category name\"\r\n          value={category}\r\n          onChange={e => setCategory(e.target.value)}\r\n        />\r\n        <div className={styles.buttonGroup}>\r\n          <button type=\"submit\" className=\"themed-button primary-action\">Add Category</button>\r\n          <button type=\"button\" className=\"themed-button secondary\" onClick={loadCategories} disabled={loading}>\r\n            {loading ? 'Loading...' : 'Load Categories'}\r\n          </button>\r\n        </div>\r\n      </form>\r\n      \r\n      {error && <p className={styles.error}>{error}</p>}\r\n      {success && <p className={styles.success}>Operation completed successfully!</p>}\r\n\r\n      {/* Categories List */}\r\n      {categories.length > 0 && (\r\n        <div className={styles.categoriesList}>\r\n          <h2 className={styles.subtitle}>Categories ({categories.length})</h2>\r\n          <div className={styles.categoryItems}>\r\n            {categories.map((cat) => (\r\n              <div key={cat.id} className={styles.categoryItem}>\r\n                {editingId === cat.id ? (\r\n                  <div className={styles.editMode}>\r\n                    <input\r\n                      type=\"text\"\r\n                      className={styles.editInput}\r\n                      value={editValue}\r\n                      onChange={e => setEditValue(e.target.value)}\r\n                    />\r\n                    <div className={styles.editButtons}>\r\n                      <button \r\n                        className={styles.saveBtn}\r\n                        onClick={() => updateCategory(cat.id)}\r\n                      >\r\n                        ‚úì Save\r\n                      </button>\r\n                      <button \r\n                        className={styles.cancelBtn}\r\n                        onClick={cancelEdit}\r\n                      >\r\n                        ‚úï Cancel\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <div className={styles.viewMode}>\r\n                    <div className={styles.categoryInfo}>\r\n                      <span className={styles.categoryName}>{cat.category}</span>\r\n                      <span className={styles.categoryUser}>by {cat.user}</span>\r\n                    </div>\r\n                    <div className={styles.categoryActions}>\r\n                      <button \r\n                        className={styles.editBtn}\r\n                        onClick={() => startEdit(cat.id, cat.category)}\r\n                      >\r\n                        ‚úèÔ∏è Edit\r\n                      </button>\r\n                      <button \r\n                        className={styles.deleteBtn}\r\n                        onClick={() => deleteCategory(cat.id, cat.category)}\r\n                      >\r\n                        üóëÔ∏è Delete\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddCategoryPage;\r\n"],"names":[],"mappings":"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","debugId":null}}]
}