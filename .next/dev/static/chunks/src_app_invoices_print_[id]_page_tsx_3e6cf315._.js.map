{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/New%20NextJs%20Project%20Samitha/my-nextjs-app%20-%20Postgres/src/app/invoices/print/%5Bid%5D/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useRouter, useParams } from 'next/navigation';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport './print-global.css';\r\n\r\n// Company Settings Interface\r\ninterface CompanySettings {\r\n  companyName: string;\r\n  companyAddress: string;\r\n  companyContactNumber: string;\r\n  companyBusinessRegNo: string;\r\n  companyDescription: string;\r\n  companyLogo?: string;\r\n  totalBalanceDiscountPercent?: number;\r\n}\r\n\r\ninterface InvoiceItem {\r\n  id: string;\r\n  productId: number;\r\n  productCode: string;\r\n  productName: string;\r\n  quantity: number;\r\n  sellingPrice: number;\r\n  discount: number;\r\n  price: number;\r\n  totalPrice: number;\r\n  costPrice?: number;\r\n}\r\n\r\ninterface Shop {\r\n  id: number;\r\n  shopName: string;\r\n  ownerName: string;\r\n  contactNumber: string;\r\n  address?: string;\r\n}\r\n\r\ninterface SalesRep {\r\n  id: number;\r\n  name: string;\r\n  contactNumber: string;\r\n}\r\n\r\ninterface Discount {\r\n  id: number;\r\n  discountName: string;\r\n  percentage: number;\r\n}\r\n\r\ninterface Invoice {\r\n  id: number;\r\n  invoiceNumber: string;\r\n  invoiceDate: string;\r\n  dueDate?: string;\r\n  shop: Shop;\r\n  salesRep?: SalesRep;\r\n  discount?: Discount;\r\n  invoiceType?: string;\r\n  invoiceTypePercentage?: number;\r\n  cashDiscountEnabled: boolean;\r\n  cashDiscountPercentage?: number;\r\n  notes?: string;\r\n  subTotal: number;\r\n  discountAmount: number;\r\n  netTotal: number;\r\n  invoiceItems: InvoiceItem[];\r\n}\r\n\r\nconst InvoicePrintTemplate: React.FC = () => {\r\n  const router = useRouter();\r\n  const params = useParams();\r\n  const invoiceId = params?.id as string;\r\n  const { user } = useAuth();\r\n  \r\n  const [invoice, setInvoice] = useState<Invoice | null>(null);\r\n  const [companySettings, setCompanySettings] = useState<CompanySettings | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n\r\n  // Get user headers for API requests\r\n  const getUserHeaders = () => {\r\n    return {\r\n      'Content-Type': 'application/json',\r\n      'x-user-data': JSON.stringify(user || {})\r\n    };\r\n  };\r\n\r\n  // Fetch invoice data\r\n  useEffect(() => {\r\n    const fetchInvoice = async () => {\r\n      if (!invoiceId) return;\r\n      \r\n      setIsLoading(true);\r\n      try {\r\n        const response = await fetch(`/api/invoices/${invoiceId}`, {\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          }\r\n        });\r\n        \r\n        const data = await response.json();\r\n        \r\n        if (data.success && data.invoice) {\r\n          console.log('üìã Invoice Data:', data.invoice);\r\n          setInvoice(data.invoice);\r\n        } else {\r\n          setError('Invoice not found');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching invoice:', error);\r\n        setError('Failed to load invoice');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchInvoice();\r\n  }, [invoiceId]);\r\n\r\n  // Fetch company settings\r\n  useEffect(() => {\r\n    const fetchCompanySettings = async () => {\r\n      try {\r\n        const response = await fetch('/api/softwareSettings', {\r\n          headers: getUserHeaders()\r\n        });\r\n        \r\n        const data = await response.json();\r\n        console.log('üè¢ Company Settings API Response:', data);\r\n        \r\n        if (data.success && data.settings) {\r\n          const settings = {\r\n            companyName: data.settings.companyName || '',\r\n            companyAddress: data.settings.companyAddress || '',\r\n            companyContactNumber: data.settings.companyContactNumber || '',\r\n            companyBusinessRegNo: data.settings.companyBusinessRegNo || '',\r\n            companyDescription: data.settings.companyDescription || '',\r\n            companyLogo: data.settings.companyLogo || '',\r\n            totalBalanceDiscountPercent: data.settings.totalBalanceDiscountPercent || 0\r\n          };\r\n          console.log('üè¢ Setting company settings:', settings);\r\n          setCompanySettings(settings);\r\n        } else {\r\n          console.log('‚ùå API response not successful or no settings:', data);\r\n        }\r\n      } catch (error) {\r\n        console.error('‚ùå Error fetching company settings:', error);\r\n        // Set default company info if API fails\r\n        setCompanySettings({\r\n          companyName: 'API Error - Company Name',\r\n          companyAddress: 'API Error - Company Address',\r\n          companyContactNumber: 'API Error - Contact Number',\r\n          companyBusinessRegNo: '',\r\n          companyDescription: '',\r\n          companyLogo: '',\r\n          totalBalanceDiscountPercent: 0\r\n        });\r\n      }\r\n    };\r\n\r\n    if (user) {\r\n      fetchCompanySettings();\r\n    }\r\n  }, [user]);\r\n\r\n  // Print function with clean settings\r\n  const handlePrint = () => {\r\n    // Hide browser UI elements before printing\r\n    document.title = ''; // Clear page title\r\n    \r\n    // Trigger print with a slight delay to ensure styles are applied\r\n    setTimeout(() => {\r\n      window.print();\r\n    }, 100);\r\n  };\r\n\r\n  // Go back function\r\n  const handleGoBack = () => {\r\n    router.back();\r\n  };\r\n\r\n  // Use stored totals from database to ensure accuracy\r\n  const calculateTotals = () => {\r\n    if (!invoice) return { \r\n      subTotal: 0, \r\n      creditDiscount: 0,\r\n      discountAmount: 0, \r\n      totalDiscountFromItems: 0,\r\n      netBeforeCashDiscount: 0,\r\n      cashDiscount: 0, \r\n      cashDiscountPercent: 0,\r\n      netTotal: 0, \r\n      totalItems: 0 \r\n    };\r\n    \r\n    // Use the stored values from the database which are already calculated correctly\r\n    const subTotal = Number(invoice.subTotal || 0);\r\n    const storedDiscountAmount = Number(invoice.discountAmount || 0);\r\n    const netTotal = Number(invoice.netTotal || 0);\r\n    \r\n    // Calculate item-level discount total\r\n    const totalDiscountFromItems = Number(\r\n      invoice.invoiceItems.reduce((sum, item) => sum + Number(item.discount || 0), 0).toFixed(2)\r\n    );\r\n    \r\n    // Credit discount calculation - check multiple sources for percentage\r\n    let creditDiscountPercent = 0;\r\n    if (invoice.discount && invoice.discount.percentage) {\r\n      creditDiscountPercent = invoice.discount.percentage;\r\n    } else if (invoice.invoiceTypePercentage) {\r\n      creditDiscountPercent = invoice.invoiceTypePercentage;\r\n    }\r\n    \r\n    // Calculate actual discount amount from percentage if discount exists\r\n    let actualDiscountAmount = 0;\r\n    if (creditDiscountPercent > 0) {\r\n      actualDiscountAmount = Number(((subTotal * creditDiscountPercent) / 100).toFixed(2));\r\n    }\r\n    \r\n    // Prefer stored amount, but use calculated if stored is 0 and we have a percentage\r\n    const discountAmount = storedDiscountAmount > 0 ? storedDiscountAmount : actualDiscountAmount;\r\n    \r\n    // Debug logging\r\n    console.log('üßÆ Print Totals Debug:', {\r\n      subTotal,\r\n      storedDiscountAmount,\r\n      actualDiscountAmount,\r\n      finalDiscountAmount: discountAmount,\r\n      creditDiscountPercent,\r\n      hasDiscount: !!invoice.discount,\r\n      invoiceTypePercentage: invoice.invoiceTypePercentage,\r\n      cashDiscountEnabled: invoice.cashDiscountEnabled,\r\n      cashDiscountFromSettings: companySettings?.totalBalanceDiscountPercent,\r\n      allInvoiceFields: Object.keys(invoice)\r\n    });\r\n    \r\n    // Net amount after credit discount but before cash discount\r\n    const netBeforeCashDiscount = subTotal - discountAmount;\r\n    \r\n    // Calculate cash discount from the difference (if cash discount is enabled)\r\n    let cashDiscountPercent = 0;\r\n    let cashDiscount = 0;\r\n    \r\n    if (invoice.cashDiscountEnabled) {\r\n      // Use stored cash discount percentage if available, otherwise fall back to settings\r\n      cashDiscountPercent = invoice.cashDiscountPercentage || companySettings?.totalBalanceDiscountPercent || 0;\r\n      \r\n      // Calculate actual cash discount amount that was applied\r\n      cashDiscount = Math.max(0, netBeforeCashDiscount - netTotal);\r\n      \r\n      console.log('üí∞ Cash Discount Debug:', {\r\n        enabled: invoice.cashDiscountEnabled,\r\n        storedPercentage: invoice.cashDiscountPercentage,\r\n        settingsPercentage: companySettings?.totalBalanceDiscountPercent,\r\n        effectivePercentage: cashDiscountPercent,\r\n        netBeforeCashDiscount,\r\n        netTotal,\r\n        calculatedCashDiscount: cashDiscount\r\n      });\r\n    }\r\n    \r\n    // Calculate total items quantity\r\n    const totalItems = Number(invoice.invoiceItems.reduce((sum, item) => sum + Number(item.quantity || 0), 0));\r\n    \r\n    return { \r\n      subTotal: Number(subTotal.toFixed(2)), \r\n      creditDiscount: Number(discountAmount.toFixed(2)), // Use calculated discount amount\r\n      creditDiscountPercent: Number(creditDiscountPercent),\r\n      discountAmount: Number(discountAmount.toFixed(2)), \r\n      totalDiscountFromItems: Number(totalDiscountFromItems),\r\n      netBeforeCashDiscount: Number(netBeforeCashDiscount.toFixed(2)),\r\n      cashDiscount: Number(cashDiscount.toFixed(2)),\r\n      cashDiscountPercent: Number(cashDiscountPercent),\r\n      netTotal: Number(netTotal.toFixed(2)), \r\n      totalItems: Number(totalItems)\r\n    };\r\n  };\r\n\r\n  const totals = calculateTotals();\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"loading\">\r\n        <div className=\"loading-spinner\"></div>\r\n        <p>Loading invoice...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || !invoice) {\r\n    return (\r\n      <div className=\"error\">\r\n        <h2>Error</h2>\r\n        <p>{error || 'Invoice not found'}</p>\r\n        <button onClick={handleGoBack} className=\"back-button\">\r\n          Go Back\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"print-container\">\r\n      {/* Print Controls - Hidden in print */}\r\n      <div className=\"print-controls\">\r\n        <button onClick={handleGoBack} className=\"back-button\">\r\n          ‚Üê Back to Invoices\r\n        </button>\r\n        <button onClick={handlePrint} className=\"print-button\">\r\n          üñ®Ô∏è Print Invoice\r\n        </button>\r\n      </div>\r\n\r\n      {/* Invoice Template */}\r\n      <div className=\"invoice\">\r\n        {/* Company Header */}\r\n        <div className=\"header\">\r\n          <div className=\"company-info\">\r\n            {companySettings?.companyLogo && companySettings.companyLogo.trim() !== '' && (\r\n              <div className=\"company-logo\">\r\n                <img \r\n                  src={companySettings.companyLogo} \r\n                  alt=\"Company Logo\" \r\n                  className=\"logo-image\"\r\n                  onError={(e) => {\r\n                    // Hide logo if image fails to load\r\n                    (e.target as HTMLImageElement).style.display = 'none';\r\n                  }}\r\n                />\r\n              </div>\r\n            )}\r\n            <h1 className=\"company-name\">\r\n              {companySettings?.companyName && companySettings.companyName.trim() !== '' \r\n                ? companySettings.companyName \r\n                : 'Company Name Not Set'}\r\n            </h1>\r\n            <p className=\"company-address\">\r\n              {companySettings?.companyAddress && companySettings.companyAddress.trim() !== '' ? (\r\n                <>\r\n                  {companySettings.companyAddress.split('\\n').map((line, index) => (\r\n                    <React.Fragment key={index}>\r\n                      {line}\r\n                      {index < companySettings.companyAddress.split('\\n').length - 1 && <br />}\r\n                    </React.Fragment>\r\n                  ))}\r\n                  <br />\r\n                  Phone: {companySettings.companyContactNumber || 'Contact Number Not Set'}\r\n                  {companySettings.companyBusinessRegNo && companySettings.companyBusinessRegNo.trim() !== '' && (\r\n                    <>\r\n                      <br />\r\n                      Business Reg: {companySettings.companyBusinessRegNo}\r\n                    </>\r\n                  )}\r\n                </>\r\n              ) : (\r\n                <>\r\n                  Company Address Not Set<br />\r\n                  Please update in Settings<br />\r\n                  Phone: Contact Number Not Set<br />\r\n                </>\r\n              )}\r\n            </p>\r\n          </div>\r\n          <div className=\"invoice-header\">\r\n            <h2 className=\"invoice-title\">INVOICE</h2>\r\n            <div className=\"invoice-info\">\r\n              <p><strong>Invoice #:</strong> {invoice.invoiceNumber}</p>\r\n              <p><strong>Date:</strong> {new Date(invoice.invoiceDate).toLocaleDateString('en-GB')}</p>\r\n              {invoice.dueDate && (\r\n                <p><strong>Due Date:</strong> {new Date(invoice.dueDate).toLocaleDateString('en-GB')}</p>\r\n              )}\r\n              {invoice.discount && (\r\n                <p><strong>Invoice Type:</strong> {invoice.discount.discountName} ({invoice.discount.percentage}% discount)</p>\r\n              )}\r\n              {invoice.dueDate && (\r\n                <p><strong>Payment Terms:</strong> Net {Math.ceil((new Date(invoice.dueDate).getTime() - new Date(invoice.invoiceDate).getTime()) / (1000 * 60 * 60 * 24))} days</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Billing Information */}\r\n        <div className=\"billing-info\">\r\n          <div className=\"bill-to\">\r\n            <h3>Bill To:</h3>\r\n            <div className=\"customer-info\">\r\n              <p><strong>{invoice.shop.shopName}</strong></p>\r\n              <p>{invoice.shop.ownerName}</p>\r\n              <p>Phone: {invoice.shop.contactNumber}</p>\r\n              {invoice.shop.address && <p>{invoice.shop.address}</p>}\r\n            </div>\r\n          </div>\r\n          \r\n          {invoice.salesRep && (\r\n            <div className=\"sales-rep\">\r\n              <h3>Sales Representative:</h3>\r\n              <p><strong>{invoice.salesRep.name}</strong></p>\r\n              <p>Phone: {invoice.salesRep.contactNumber}</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Items Table */}\r\n        <div className=\"items-section\">\r\n          <table className=\"items-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Item Code</th>\r\n                <th>Description</th>\r\n                <th>Qty</th>\r\n                <th>Unit Price</th>\r\n                <th>Discount</th>\r\n                <th>Total</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {invoice.invoiceItems.map((item, index) => (\r\n                <tr key={item.id || index}>\r\n                  <td>{item.productCode}</td>\r\n                  <td>{item.productName}</td>\r\n                  <td className=\"center\">{item.quantity}</td>\r\n                  <td className=\"right\">LKR {item.sellingPrice.toLocaleString()}</td>\r\n                  <td className=\"right\">LKR {item.discount.toLocaleString()}</td>\r\n                  <td className=\"right\">LKR {item.totalPrice.toLocaleString()}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {/* Totals Section */}\r\n        <div className=\"totals-section\">\r\n          <div className=\"totals-grid\">\r\n            \r\n            {/* Sub Total - Credit Discount */}\r\n            <div className=\"total-row\">\r\n              <span>Sub Total - Credit Discount ({invoice.discount ? totals.creditDiscountPercent : 0}%):</span>\r\n              <span>LKR {totals.subTotal.toLocaleString()}</span>\r\n            </div>\r\n            \r\n            {/* Discount Amount */}\r\n            <div className=\"total-row\">\r\n              <span>Discount Amount ({invoice.discount ? totals.creditDiscountPercent : 0}%):</span>\r\n              <span>\r\n                {totals.discountAmount > 0 \r\n                  ? `- LKR ${totals.discountAmount.toLocaleString()}` \r\n                  : '- LKR 0'}\r\n              </span>\r\n            </div>\r\n            \r\n            {/* Total Discount from Items */}\r\n            <div className=\"total-row\">\r\n              <span>Total Discount from Items:</span>\r\n              <span>LKR {totals.totalDiscountFromItems.toLocaleString()}</span>\r\n            </div>\r\n            \r\n            {/* Cash Discount */}\r\n            <div className=\"total-row\">\r\n              <span>Cash Discount ({totals.cashDiscountPercent}%):</span>\r\n              <span>\r\n                {totals.cashDiscount > 0 \r\n                  ? `- LKR ${totals.cashDiscount.toLocaleString()}` \r\n                  : 'LKR 0'}\r\n              </span>\r\n            </div>\r\n            \r\n            {/* Net Total */}\r\n            <div className=\"total-row net-total\">\r\n              <span>Net Total:</span>\r\n              <span>LKR {totals.netTotal.toLocaleString()}</span>\r\n            </div>\r\n            \r\n          </div>\r\n        </div>\r\n\r\n        {/* Notes Section */}\r\n        {invoice.notes && (\r\n          <div className=\"notes-section\">\r\n            <h3>Notes:</h3>\r\n            <p>{invoice.notes}</p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Footer */}\r\n        <div className=\"footer\">\r\n          <div className=\"thank-you\">\r\n            <h3>Thank you for your business!</h3>\r\n          </div>\r\n          {companySettings?.companyDescription && companySettings.companyDescription.trim() !== '' && (\r\n            <div className=\"company-description\">\r\n              <p>{companySettings.companyDescription}</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Print Timestamp */}\r\n        <div className=\"print-info\">\r\n          <p>Printed on: {new Date().toLocaleString()}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InvoicePrintTemplate;"],"names":[],"mappings":"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","debugId":null}}]
}